"use strict";(self.webpackChunktaskana_web=self.webpackChunktaskana_web||[]).push([["src_app_v2_task-routing_task-routing_module_ts"],{6205:(A,c,r)=>{r.r(c),r.d(c,{TaskRoutingModule:()=>S});var u=r(6362),s=r(9720),p=r(8784),g=r(2264),t=r(3184);let f=(()=>{class n{constructor(o,e){this.httpClient=o,this.startupService=e}get url(){return this.startupService.getTaskanaRestUrl()+"/v1/routing-rules/default"}uploadRoutingRules(o){const e=new FormData;e.append("excelRoutingFile",o);const a=(new p.WM).set("Content-Type","multipart/form-data");return this.httpClient.put(this.url,e,{headers:a})}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(p.eN),t.LFG(g.H))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=r(4118),m=r(8151);function v(n,i){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",7),t._uU(1,"Click to choose file or drag and drop here"),t.qZA())}function k(n,i){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Oqu(null==o.file?null:o.file.name)}}let R=(()=>{class n{constructor(o,e,a){this.routingUploadService=o,this.toastService=e,this.notificationService=a,this.file=null}ngOnInit(){}onFileChanged(o){var e;const a=o.target;!(null===(e=a.files)||void 0===e?void 0:e.length)||(this.file=a.files[0],this.upload(a.files))}upload(o){void 0!==o&&(this.file=o[0]),this.routingUploadService.uploadRoutingRules(this.file).subscribe({next:e=>this.toastService.success(e.result),error:e=>{this.notificationService.showError(e.error.message.key),this.clearInput()},complete:()=>this.clearInput()})}clearInput(){document.getElementById("routingUpload").value="",this.file=null}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(f),t.Y36(m.jE),t.Y36(h.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["taskana-routing-upload"]],decls:10,vars:2,consts:[[1,"routing-upload"],["taskanaDragAndDrop","",1,"routing-upload__upload-area",3,"onFileDropped","click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"routing-upload__icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["class","routing-upload__description",4,"ngIf"],["id","routingUpload","type","file","accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","title","Upload task routing Excel File",2,"display","none",3,"change"],["input",""],[1,"routing-upload__description"]],template:function(o,e){if(1&o){const a=t.EpF();t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Upload custom routing rules"),t.qZA(),t.TgZ(3,"div",1),t.NdJ("onFileDropped",function(l){return e.upload(l)})("click",function(){return t.CHM(a),t.MAs(9).click()}),t.O4$(),t.TgZ(4,"svg",2),t._UZ(5,"path",3),t.qZA(),t.YNc(6,v,2,0,"span",4),t.YNc(7,k,2,1,"span",4),t.qZA(),t.kcU(),t.TgZ(8,"input",5,6),t.NdJ("change",function(l){return e.onFileChanged(l)}),t.qZA()()}2&o&&(t.xp6(6),t.Q6J("ngIf",!(null!=e.file&&e.file.name)),t.xp6(1),t.Q6J("ngIf",null==e.file?null:e.file.name))},directives:[u.O5],styles:[".fileover[_ngcontent-%COMP%]{border:4px solid #246972}.routing-upload[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 104px);display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:-68px}.routing-upload[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{margin-bottom:48px}.routing-upload__upload-area[_ngcontent-%COMP%]{height:400px;width:400px;padding:16px;background-color:#f5f5f5;border:4px solid #f5f5f5;border-radius:10px;cursor:pointer;display:flex;flex-direction:column;justify-content:center;align-items:center}.routing-upload__upload-area[_ngcontent-%COMP%]:hover{border:4px solid #246972}.routing-upload__icon[_ngcontent-%COMP%]{height:64px;width:64px;color:gray}.routing-upload__description[_ngcontent-%COMP%]{margin-top:16px;color:gray}"]}),n})();var C=r(745),U=r(2154),x=r(635),y=r(3158);const T=[{path:"",canActivate:[(()=>{class n{constructor(o,e){this.taskanaEngineService=o,this.router=e}canActivate(o,e){return this.taskanaEngineService.isCustomRoutingRulesEnabled().pipe((0,x.U)(a=>a||this.router.parseUrl("/taskana/workplace")),(0,y.K)(()=>(0,C.of)(this.router.parseUrl("/taskana/workplace"))))}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(U.L),t.LFG(s.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()],component:R}];let M=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[s.Bz.forChild(T)],s.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez]]}),n})(),S=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,M,F]]}),n})()}}]);
//# sourceMappingURL=src_app_v2_task-routing_task-routing_module_ts.c0c9ada7da7acbf2.js.map