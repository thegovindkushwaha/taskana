(self.webpackChunktaskana_web=self.webpackChunktaskana_web||[]).push([["src_app_administration_administration_module_ts"],{6526:(zt,Dt,c)=>{"use strict";c.r(Dt),c.d(Dt,{AdministrationModule:()=>io});var f=c(6362),_=c(587),Q=c(592),X=c(3123),Ft=c(9394),nt=c(7795),t=c(3184);let li=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[],imports:[[]]}),s})();var g=c(3336),d=c(558),S=c(4491),C=c(2438),I=c(4770),tt=c(1434),P=c(9715),kt=c(1130),be=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},ke=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};function di(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"mat-option",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().select(a)}),t._uU(1),t.qZA()}if(2&s){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}class B{constructor(i,e){this.store=i,this.location=e}select(i){this.store.dispatch(new C.nl(i)),this.location.go(this.location.path().replace(/(classifications).*/g,"classifications"))}}B.\u0275fac=function(i){return new(i||B)(t.Y36(d.yh),t.Y36(f.Ye))},B.\u0275cmp=t.Xpm({type:B,selectors:[["taskana-administration-classification-types-selector"]],decls:7,vars:6,consts:[[1,"types-selector"],["matTooltip","Change type",1,"types-selector__selected-type",3,"value"],["class","types-selector__options",3,"value","click",4,"ngFor","ngForOf"],[1,"types-selector__options",3,"value","click"]],template:function(i,e){1&i&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2,"Type"),t.qZA(),t.TgZ(3,"mat-select",1),t.ALo(4,"async"),t.YNc(5,di,2,2,"mat-option",2),t.ALo(6,"async"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("value",t.lcZ(4,2,e.classificationTypeSelected$)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(6,4,e.classificationTypes$)))},directives:[I.KE,I.hX,tt.gD,P.gM,f.sg,kt.ey],pipes:[f.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{max-width:120px!important}.radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:.5rem 2.5rem}"]}),be([(0,d.Ph)(S.G.selectedClassificationType),ke("design:type",g.y)],B.prototype,"classificationTypeSelected$",void 0),be([(0,d.Ph)(S.G.classificationTypes),ke("design:type",g.y)],B.prototype,"classificationTypes$",void 0);var pi=c(2046),y=c(253),Rt=c(2194),at=c(4900),rt=c(2917),p=c(8951),ct=c(4118),lt=c(635);function Nt(s){return(0,lt.U)(i=>[...Array(s).keys()].map(e=>e+1).map(e=>i[`custom${e}`]||{field:`Custom ${e}`,visible:!0}))}var vt=c(5162),ve=c(7118),xe=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},dt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};class Ut{static groups(i){return i.groups}static permissions(i){return i.permissions}}xe([(0,d.Qf)([ve.g]),dt("design:type",Function),dt("design:paramtypes",[Object]),dt("design:returntype",Array)],Ut,"groups",null),xe([(0,d.Qf)([ve.g]),dt("design:type",Function),dt("design:paramtypes",[Object]),dt("design:returntype",Array)],Ut,"permissions",null);var we=c(5758),ie=c(383),Wt=c(6531),D=c(7939),Ce=c(3963),pt=c(3365),ye=c(1534),U=c(7317),F=c(5590),se=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},ne=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};function mi(s,i){1&s&&(t.TgZ(0,"div",7)(1,"h3"),t._uU(2,"Select an access id"),t.qZA(),t._UZ(3,"svg-icon",8),t.qZA())}function _i(s,i){1&s&&(t.TgZ(0,"th",19),t._uU(1," Name "),t.qZA())}function ui(s,i){if(1&s&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function fi(s,i){1&s&&(t.TgZ(0,"th",19),t._uU(1," Access Id "),t.qZA())}function gi(s,i){if(1&s&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.accessId," ")}}function hi(s,i){1&s&&t._UZ(0,"tr",21)}function bi(s,i){1&s&&t._UZ(0,"tr",22)}const Jt=function(){return["Name","Access Id"]};function ki(s,i){if(1&s&&(t.TgZ(0,"table",12),t.ynx(1,13),t.YNc(2,_i,2,0,"th",14),t.YNc(3,ui,2,1,"td",15),t.BQk(),t.ynx(4,16),t.YNc(5,fi,2,0,"th",14),t.YNc(6,gi,2,1,"td",15),t.BQk(),t.YNc(7,hi,1,0,"tr",17),t.YNc(8,bi,1,0,"tr",18),t.qZA()),2&s){const e=t.oxw(2);t.Q6J("dataSource",e.groups),t.xp6(7),t.Q6J("matHeaderRowDef",t.DdM(3,Jt)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,Jt))}}function vi(s,i){1&s&&t._uU(0,"The user is not associated to any groups ")}function xi(s,i){if(1&s&&(t.TgZ(0,"mat-expansion-panel",9)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA()(),t.YNc(4,ki,9,5,"table",10),t.YNc(5,vi,1,0,"ng-template",null,11,t.W1O),t.qZA()),2&s){const e=t.MAs(6),n=t.oxw();t.xp6(3),t.hij(" Groups of ",n.accessId.accessId,""),t.xp6(1),t.Q6J("ngIf",n.groups&&n.groups.length>0)("ngIfElse",e)}}function wi(s,i){1&s&&(t.TgZ(0,"th",19),t._uU(1," Name "),t.qZA())}function Ci(s,i){if(1&s&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function yi(s,i){1&s&&(t.TgZ(0,"th",19),t._uU(1," Access Id "),t.qZA())}function Ti(s,i){if(1&s&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",e.accessId," ")}}function Ii(s,i){1&s&&t._UZ(0,"tr",21)}function Ai(s,i){1&s&&t._UZ(0,"tr",22)}function Zi(s,i){if(1&s&&(t.TgZ(0,"table",12),t.ynx(1,13),t.YNc(2,wi,2,0,"th",14),t.YNc(3,Ci,2,1,"td",25),t.BQk(),t.ynx(4,16),t.YNc(5,yi,2,0,"th",14),t.YNc(6,Ti,2,1,"td",25),t.BQk(),t.YNc(7,Ii,1,0,"tr",17),t.YNc(8,Ai,1,0,"tr",18),t.qZA()),2&s){const e=t.oxw(2);t.Q6J("dataSource",e.permissions),t.xp6(7),t.Q6J("matHeaderRowDef",t.DdM(3,Jt)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,Jt))}}function Mi(s,i){1&s&&t._uU(0,"The user is not associated to any permissions ")}function Oi(s,i){if(1&s&&(t.TgZ(0,"mat-expansion-panel",23)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA()(),t.YNc(4,Zi,9,5,"table",10),t.YNc(5,Mi,1,0,"ng-template",null,24,t.W1O),t.qZA()),2&s){const e=t.MAs(6),n=t.oxw();t.xp6(3),t.hij(" Permissions of ",n.accessId.accessId,""),t.xp6(1),t.Q6J("ngIf",n.permissions&&n.permissions.length>0)("ngIfElse",e)}}function Si(s,i){if(1&s&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.field," ")}}function Pi(s,i){if(1&s&&(t.ynx(0),t.YNc(1,Si,2,1,"th",40),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}function Di(s,i){if(1&s&&(t.TgZ(0,"td",31)(1,"label",51),t._uU(2),t.qZA()()),2&s){const e=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",e.accessId),t.xp6(1),t.Oqu(e.accessName)}}function Fi(s,i){if(1&s&&(t.TgZ(0,"td"),t._UZ(1,"mat-checkbox",52),t.qZA()),2&s){const e=t.oxw().index,n=t.oxw().index;t.xp6(1),t.hYB("id","checkbox-",n,"-",e+7,""),t.MGl("formControlName","permCustom",e+1,"")}}function Ei(s,i){if(1&s&&(t.ynx(0),t.YNc(1,Fi,2,3,"td",40),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}function qi(s,i){if(1&s&&(t.TgZ(0,"tr",41),t._UZ(1,"td"),t.TgZ(2,"td",31)(3,"label",42),t._uU(4),t.qZA()(),t.YNc(5,Di,3,2,"td",43),t.ALo(6,"async"),t.TgZ(7,"td"),t._UZ(8,"mat-checkbox",44),t.qZA(),t.TgZ(9,"td"),t._UZ(10,"mat-checkbox",45),t.qZA(),t.TgZ(11,"td"),t._UZ(12,"mat-checkbox",46),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"mat-checkbox",47),t.qZA(),t.TgZ(15,"td"),t._UZ(16,"mat-checkbox",48),t.qZA(),t.TgZ(17,"td"),t._UZ(18,"mat-checkbox",49),t.qZA(),t.TgZ(19,"td"),t._UZ(20,"mat-checkbox",50),t.qZA(),t.YNc(21,Ei,2,1,"ng-container",32),t.ALo(22,"async"),t.qZA()),2&s){const e=i.$implicit,n=i.index,o=t.oxw(3);let a;t.Q6J("formGroupName",n.toString()),t.xp6(4),t.Oqu(e.workbasketKey),t.xp6(1),t.Q6J("ngIf",null==(a=t.lcZ(6,11,o.accessItemsCustomization$))?null:a.accessId.lookupField),t.xp6(3),t.MGl("id","checkbox-",n,"-0"),t.xp6(2),t.MGl("id","checkbox-",n,"-1"),t.xp6(2),t.MGl("id","checkbox-",n,"-2"),t.xp6(2),t.MGl("id","checkbox-",n,"-3"),t.xp6(2),t.MGl("id","checkbox-",n,"-4"),t.xp6(2),t.MGl("id","checkbox-",n,"-5"),t.xp6(2),t.MGl("id","checkbox-",n,"-6"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(22,13,o.customFields$))}}function Ri(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).revokeAccess()}),t._uU(1," Revoke access "),t.TgZ(2,"mat-icon"),t._uU(3,"clear"),t.qZA()()}if(2&s){const e=t.oxw(3);t.Q6J("disabled",e.isGroup)}}function Ni(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",29)(1,"ng-form",30)(2,"table")(3,"thead")(4,"tr"),t._UZ(5,"th"),t.TgZ(6,"th",31),t._uU(7,"Workbasket Key"),t.qZA(),t.TgZ(8,"th",31),t._uU(9,"Access Id"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Read"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Read tasks"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Open"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Edit tasks"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Append"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Transfer"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Distribute"),t.qZA(),t.YNc(24,Pi,2,1,"ng-container",32),t.ALo(25,"async"),t.qZA(),t.TgZ(26,"tr")(27,"th",31)(28,"taskana-shared-sort",33),t.NdJ("performSorting",function(o){return t.CHM(e),t.oxw(2).sorting(o)}),t.qZA()(),t.TgZ(29,"th")(30,"mat-form-field",34)(31,"mat-label"),t._uU(32,"Workbasket filter"),t.qZA(),t.TgZ(33,"input",35),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw(2).searchForAccessItemsWorkbaskets()}),t.qZA()()(),t.TgZ(34,"th")(35,"mat-form-field",34)(36,"mat-label"),t._uU(37,"Access id filter"),t.qZA(),t.TgZ(38,"input",36),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw(2).searchForAccessItemsWorkbaskets()}),t.qZA()()(),t._UZ(39,"th"),t.qZA()(),t.TgZ(40,"tbody",37),t.YNc(41,qi,23,15,"tr",38),t.qZA()(),t.YNc(42,Ri,4,1,"button",39),t.qZA()()}if(2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e.accessItemsForm),t.xp6(23),t.Q6J("ngForOf",t.lcZ(25,6,e.customFields$)),t.xp6(4),t.Q6J("sortingFields",e.sortingFields)("defaultSortBy",e.defaultSortBy),t.xp6(13),t.Q6J("ngForOf",e.accessItems),t.xp6(1),t.Q6J("ngIf",e.accessItemsForm)}}function Ui(s,i){if(1&s&&(t.TgZ(0,"mat-expansion-panel",27)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA()(),t.YNc(4,Ni,43,8,"div",28),t.qZA()),2&s){const e=t.oxw();t.Q6J("expanded",!0),t.xp6(3),t.hij(" Authorizations of ",e.accessId.accessId,""),t.xp6(1),t.Q6J("ngIf",e.accessItemsForm)}}class H{constructor(i,e,n,o,a){this.formBuilder=i,this.formsValidatorService=e,this.notificationService=n,this.store=o,this.dialog=a,this.isRequired=!1,this.panelState=!1,this.defaultSortBy=at._X.ACCESS_ID,this.sortingFields=at.sk,this.sortModel={"sort-by":this.defaultSortBy,order:at.Nm.DESC},this.isGroup=!1,this.isPermission=!1,this.destroy$=new y.x}ngOnInit(){this.groups$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.groups=i}),this.permissions$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.permissions=i})}onSelectAccessId(i){i?(this.accessId=i,this.accessIdPrevious!==i.accessId&&(this.accessIdPrevious=i.accessId,this.accessIdName=i.name,this.store.dispatch(new vt.rL(i.accessId)).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.searchForAccessItemsWorkbaskets()}),this.store.dispatch(new vt.v6(i.accessId)).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.searchForAccessItemsWorkbaskets()}))):this.accessItemsForm=null,this.customFields$=this.accessItemsCustomization$.pipe(Nt(12))}searchForAccessItemsWorkbaskets(){if(this.removeFocus(),null==this.permissions){const i={"access-id":[this.accessId,...this.groups].map(e=>e.accessId)};this.store.dispatch(new vt.B2(i,this.sortModel)).pipe((0,p.R)(this.destroy$)).subscribe(e=>{this.setAccessItemsGroups(e.accessItemsManagement.accessItemsResource?e.accessItemsManagement.accessItemsResource.accessItems:[])})}else{const i={"access-id":[this.accessId,...this.groups,...this.permissions].map(e=>e.accessId)};this.store.dispatch(new vt.B2(i,this.sortModel)).pipe((0,p.R)(this.destroy$)).subscribe(e=>{this.setAccessItemsPermissions(e.accessItemsManagement.accessItemsResource?e.accessItemsManagement.accessItemsResource.accessItems:[]),this.setAccessItemsGroups(e.accessItemsManagement.accessItemsResource?e.accessItemsManagement.accessItemsResource.accessItems:[])})}}setAccessItemsGroups(i){const e=i.map(o=>this.formBuilder.group(o));e.forEach(o=>{o.controls.accessId.setValidators(_.kI.required),Object.keys(o.controls).forEach(a=>{o.controls[a].disable()})});const n=this.formBuilder.array(e);this.accessItemsForm||(this.accessItemsForm=this.formBuilder.group({})),this.accessItemsForm.setControl("accessItemsGroups",n),this.accessItemsForm.value.workbasketKeyFilter||this.accessItemsForm.addControl("workbasketKeyFilter",new _.NI),this.accessItemsForm.value.accessIdFilter||this.accessItemsForm.addControl("accessIdFilter",new _.NI),this.accessItems=i,(this.accessItemsForm.value.workbasketKeyFilter||this.accessItemsForm.value.accessIdFilter)&&this.filterAccessItems()}setAccessItemsPermissions(i){const e=i.map(o=>this.formBuilder.group(o));e.forEach(o=>{o.controls.accessId.setValidators(_.kI.required),Object.keys(o.controls).forEach(a=>{o.controls[a].disable()})});const n=this.formBuilder.array(e);this.accessItemsForm||(this.accessItemsForm=this.formBuilder.group({})),this.accessItemsForm.setControl("accessItemsPermissions",n),this.accessItemsForm.value.workbasketKeyFilter||this.accessItemsForm.addControl("workbasketKeyFilter",new _.NI),this.accessItemsForm.value.accessIdFilter||this.accessItemsForm.addControl("accessIdFilter",new _.NI),this.accessItems=i,(this.accessItemsForm.value.workbasketKeyFilter||this.accessItemsForm.value.accessIdFilter)&&this.filterAccessItems()}filterAccessItems(){this.accessItemsForm.value.accessIdFilter&&(this.accessItems=this.accessItems.filter(i=>i.accessName.toLowerCase().includes(this.accessItemsForm.value.accessIdFilter.toLowerCase()))),this.accessItemsForm.value.workbasketKeyFilter&&(this.accessItems=this.accessItems.filter(i=>i.workbasketKey.toLowerCase().includes(this.accessItemsForm.value.workbasketKeyFilter.toLowerCase())))}revokeAccess(){this.notificationService.showDialog("ACCESS_ITEM_MANAGEMENT_REVOKE_ACCESS",{accessId:this.accessId.accessId},()=>{this.store.dispatch(new vt.Zx(this.accessId.accessId)).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.searchForAccessItemsWorkbaskets()})})}get accessItemsGroups(){return this.accessItemsForm?this.accessItemsForm.get("accessItemsGroups"):null}get accessItemsPermissions(){return this.accessItemsForm?this.accessItemsForm.get("accessItemsPermissions"):null}isFieldValid(i,e){return this.formsValidatorService.isFieldValid(this.accessItemsGroups[e],i)||this.formsValidatorService.isFieldValid(this.accessItemsPermissions[e],i)}sorting(i){this.sortModel=i,this.searchForAccessItemsWorkbaskets()}removeFocus(){document.activeElement instanceof HTMLElement&&document.activeElement.focus()}clearFilter(){this.accessItemsForm&&(this.accessItemsForm.patchValue({workbasketKeyFilter:"",accessIdFilter:""}),this.searchForAccessItemsWorkbaskets())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}H.\u0275fac=function(i){return new(i||H)(t.Y36(_.qu),t.Y36(Rt.o),t.Y36(ct.g),t.Y36(d.yh),t.Y36(we.uw))},H.\u0275cmp=t.Xpm({type:H,selectors:[["taskana-administration-access-items-management"]],decls:7,vars:4,consts:[[1,"access-items"],[1,"access-items__typeahead"],["placeHolderMessage","Search for AccessId",3,"accessIdEventEmitter"],["class","access-items__icon",4,"ngIf"],["class","access-items__groups-expansion-panel",4,"ngIf"],["class","access-items__permissions-expansion-panel",4,"ngIf"],["class","access-items__authorization-expansion-panel",3,"expanded",4,"ngIf"],[1,"access-items__icon"],["src","./assets/icons/users.svg",1,"empty-icon"],[1,"access-items__groups-expansion-panel"],["mat-table","",3,"dataSource",4,"ngIf","ngIfElse"],["noGroups",""],["mat-table","",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","access-items__group-table-cell",4,"matCellDef"],["matColumnDef","Access Id"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"access-items__group-table-cell"],["mat-header-row",""],["mat-row",""],[1,"access-items__permissions-expansion-panel"],["noPermissions",""],["mat-cell","","class","access-items__permission-table-cell",4,"matCellDef"],["mat-cell","",1,"access-items__permission-table-cell"],[1,"access-items__authorization-expansion-panel",3,"expanded"],["class","access-items__table",4,"ngIf"],[1,"access-items__table"],[3,"formGroup"],[1,"align-left"],[4,"ngFor","ngForOf"],["menuPosition","left",3,"sortingFields","defaultSortBy","performSorting"],["appearance","outline",1,"access-items__authorization-expansion-panel-filter"],["matInput","","formControlName","workbasketKeyFilter","type","text",3,"keyup.enter"],["matInput","","formControlName","accessIdFilter","type","text",3,"keyup.enter"],["formArrayName","accessItemsGroups"],["class","access-items__authorization-expansion-panel__content",3,"formGroupName",4,"ngFor","ngForOf"],["mat-raised-button","","class","access-items__revoke-button","color","warn",3,"disabled","click",4,"ngIf"],[4,"ngIf"],[1,"access-items__authorization-expansion-panel__content",3,"formGroupName"],[1,"wrap"],["class","align-left",4,"ngIf"],["formControlName","permRead",3,"id"],["formControlName","permReadTasks",3,"id"],["formControlName","permOpen",3,"id"],["formControlName","permEditTasks",3,"id"],["formControlName","permAppend",3,"id"],["formControlName","permTransfer",3,"id"],["formControlName","permDistribute",3,"id"],[1,"wrap",3,"matTooltip"],[3,"id","formControlName"],["mat-raised-button","","color","warn",1,"access-items__revoke-button",3,"disabled","click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"taskana-shared-type-ahead",2),t.NdJ("accessIdEventEmitter",function(o){return e.onSelectAccessId(o)}),t.qZA()(),t.YNc(3,mi,4,0,"div",3),t.YNc(4,xi,7,3,"mat-expansion-panel",4),t.YNc(5,Oi,7,3,"mat-expansion-panel",5),t.YNc(6,Ui,5,3,"mat-expansion-panel",6),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngIf",!e.accessItemsForm),t.xp6(1),t.Q6J("ngIf",e.accessItemsForm),t.xp6(1),t.Q6J("ngIf",e.accessItemsForm),t.xp6(1),t.Q6J("ngIf",e.accessItemsForm))},directives:[ie.e,f.O5,Q.bk,Wt.ib,Wt.yz,Wt.yK,D.BZ,D.w1,D.fO,D.ge,D.Dz,D.ev,D.as,D.XQ,D.nj,D.Gk,_.F,_.JL,_.sg,f.sg,Ce.x,I.KE,I.hX,pt.Nt,_.Fj,_.JJ,_.u,_.CE,_.x0,P.gM,ye.oG,U.lW,F.Hw],pipes:[f.Ov],styles:["table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;width:100%;margin-bottom:10px}  .mat-header-cell{color:#000;font-weight:700}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:8px;height:70px;text-align:center}td[_ngcontent-%COMP%]{border-top:1px solid #dddddd}tr[_ngcontent-%COMP%]:first-child > th[_ngcontent-%COMP%]{border-bottom:2px solid #dddddd;height:40px}tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%]{background-color:#0000000d}tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%]{border-top:2px solid grey}.access-items[_ngcontent-%COMP%]{overflow-y:scroll;height:calc(100vh - 104px)}.access-items__group-table-cell[_ngcontent-%COMP%], .access-items__permission-table-cell[_ngcontent-%COMP%]{height:48px;text-align:left}.access-items__table[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}.access-items__typeahead[_ngcontent-%COMP%]{width:50%;margin-left:25%;margin-right:25%;margin-top:20px}.access-items__icon[_ngcontent-%COMP%]{text-align:center;color:gray}.access-items__groups-expansion-panel[_ngcontent-%COMP%], .access-items__permissions-expansion-panel[_ngcontent-%COMP%]{width:98%;left:1%}.access-items__authorization-expansion-panel[_ngcontent-%COMP%]{width:98%;left:1%;margin-bottom:5px}.access-items__authorization-expansion-panel-filter[_ngcontent-%COMP%]{width:130px;margin-bottom:-31px;margin-top:-10px;margin-left:-35px;text-align:left}@media only screen and (max-width: 1600px){.access-items__authorization-expansion-panel-filter[_ngcontent-%COMP%]{margin-left:-5px}}.access-items__revoke-button[_ngcontent-%COMP%]{float:right;margin-right:30px;margin-bottom:8px}.mat-mini-fab[_ngcontent-%COMP%]{outline-color:none;border:none;box-shadow:none!important}.align-left[_ngcontent-%COMP%]{text-align:left}.wrap[_ngcontent-%COMP%]{max-width:150px;word-wrap:break-word}"]}),se([(0,d.Ph)(rt.x.accessItemsCustomisation),ne("design:type",g.y)],H.prototype,"accessItemsCustomization$",void 0),se([(0,d.Ph)(Ut.groups),ne("design:type",g.y)],H.prototype,"groups$",void 0),se([(0,d.Ph)(Ut.permissions),ne("design:type",g.y)],H.prototype,"permissions$",void 0);var Wi=c(8390),j=c(9720),xt=c(6186),et=(()=>{return(s=et||(et={}))[s.WORKBASKETS=0]="WORKBASKETS",s[s.CLASSIFICATIONS=1]="CLASSIFICATIONS",s[s.TASKS=2]="TASKS",et;var s})(),mt=c(2877);let wt=(()=>{class s{constructor(){this.importingFinished=new y.x}setImportingFinished(e){this.importingFinished.next(e)}getImportingFinished(){return this.importingFinished.asObservable()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();var _t=c(7312),$t=c(8784),oe=c(2500),Ji=c(5226);class Te{static saveFile(i,e){(0,Ji.saveAs)(new Blob([JSON.stringify(i,null,2)],{type:"application/json;charset=UTF-8"}),e)}}var Ie=c(2264),Z=c(9295);let Ae=(()=>{class s{constructor(e,n){this.httpClient=e,this.startupService=n}get url(){return this.startupService.getTaskanaRestUrl()+"/v1/classification-definitions"}exportClassifications(e){const o=this.httpClient.get(this.url+(""===e?e:`?domain=${e}`)).pipe((0,Z.q)(1));return o.subscribe(a=>Te.saveFile(a,`Classifications_${oe.H.getDate()}.json`)),o}importClassification(e){const n=new FormData;n.append("file",e);const o=(new $t.WM).set("Content-Type","multipart/form-data");return this.httpClient.post(this.url,n,{headers:o})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG($t.eN),t.LFG(Ie.H))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})(),Ze=(()=>{class s{constructor(e,n){this.httpClient=e,this.startupService=n}get url(){return this.startupService.getTaskanaRestUrl()+"/v1/workbasket-definitions"}exportWorkbaskets(e){const o=this.httpClient.get(this.url+(""===e?e:`?domain=${e}`)).pipe((0,Z.q)(1));return o.subscribe(a=>Te.saveFile(a,`Workbaskets_${oe.H.getDate()}.json`)),o}importWorkbasket(e){const n=new FormData;n.append("file",e);const o=(new $t.WM).set("Content-Type","multipart/form-data");return this.httpClient.post(this.url,n,{headers:o})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG($t.eN),t.LFG(Ie.H))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();var $i=c(8151),A=c(2796);const Li=["selectedFile"];function Qi(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().export(a)}),t._uU(1),t.qZA()}if(2&s){const e=i.$implicit;t.xp6(1),t.hij(" ",""===e?"Master":e," ")}}let ae=(()=>{class s{constructor(e,n,o,a,r,l){this.domainService=e,this.workbasketDefinitionService=n,this.classificationDefinitionService=o,this.notificationService=a,this.importExportService=r,this.hotToastService=l,this.destroy$=new y.x}ngOnInit(){this.domains$=this.domainService.getDomains()}export(e=""){this.currentSelection===et.WORKBASKETS?this.workbasketDefinitionService.exportWorkbaskets(e):this.classificationDefinitionService.exportClassifications(e)}uploadFile(){const e=this.selectedFileInput.nativeElement.files[0];this.checkFormatFile(e)&&(this.currentSelection===et.WORKBASKETS?this.workbasketDefinitionService.importWorkbasket(e).pipe((0,p.R)(this.destroy$),this.hotToastService.observe({loading:"Uploading...",success:"File successfully uploaded",error:"Upload failed"})).subscribe({next:()=>{this.importExportService.setImportingFinished(!0)}}):this.classificationDefinitionService.importClassification(e).pipe((0,p.R)(this.destroy$),this.hotToastService.observe({loading:"Uploading...",success:"File successfully uploaded",error:"Upload failed"})).subscribe({next:()=>{this.importExportService.setImportingFinished(!0)}})),this.resetProgress()}checkFormatFile(e){let o=!1;return"json"===e.name.match(/\.([^.]+)$/)[1]?o=!0:(e.value="",this.notificationService.showError("IMPORT_EXPORT_UPLOAD_FILE_FORMAT")),o}resetProgress(){this.selectedFileInput.nativeElement.value=""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(mt.N),t.Y36(Ze),t.Y36(Ae),t.Y36(ct.g),t.Y36(wt),t.Y36($i.jE))},s.\u0275cmp=t.Xpm({type:s,selectors:[["taskana-administration-import-export"]],viewQuery:function(e,n){if(1&e&&t.Gf(Li,7),2&e){let o;t.iGM(o=t.CRH())&&(n.selectedFileInput=o.first)}},inputs:{currentSelection:"currentSelection",parentComponent:"parentComponent"},decls:18,vars:6,consts:[[1,"import-export"],["mat-stroked-button","","title","Import",1,"mr-1",3,"matTooltip","click"],["enctype","multipart/form-data","method","post",1,"hide"],["type","file","accept",".json",1,"hidden",3,"change"],["selectedFile",""],["mat-stroked-button","","title","Export",1,"mr-1",3,"matTooltip","matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","href","javascript:void(0)",3,"click"],["mat-menu-item","","href","javascript:void(0)",3,"click",4,"ngFor","ngForOf"]],template:function(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return t.CHM(o),t.MAs(7).click()}),t._uU(2," Import "),t.TgZ(3,"mat-icon"),t._uU(4,"cloud_upload"),t.qZA()(),t.TgZ(5,"form",2)(6,"input",3,4),t.NdJ("change",function(){return n.uploadFile()}),t.qZA()(),t.TgZ(8,"button",5),t._uU(9," Export "),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA()(),t.TgZ(12,"mat-menu",null,6)(14,"button",7),t.NdJ("click",function(){return n.export()}),t._uU(15," All Domains "),t.qZA(),t.YNc(16,Qi,2,1,"button",8),t.ALo(17,"async"),t.qZA()()}if(2&e){const o=t.MAs(13);t.xp6(1),t.MGl("matTooltip","Import ",n.parentComponent,""),t.xp6(7),t.MGl("matTooltip","Export ",n.parentComponent,""),t.Q6J("matMenuTriggerFor",o),t.xp6(8),t.Q6J("ngForOf",t.lcZ(17,4,n.domains$))}},directives:[U.lW,P.gM,F.Hw,_._Y,_.JL,_.F,A.p6,A.VK,A.OP,f.sg],pipes:[f.Ov],styles:[".import-export[_ngcontent-%COMP%]{display:flex}.hide[_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{color:#555}"]}),s})();var Yi=c(6947),Ct=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},yt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};function Hi(s,i){1&s&&(t.TgZ(0,"mat-icon"),t._uU(1,"filter_list"),t.qZA())}function ji(s,i){if(1&s&&(t._UZ(0,"svg-icon",21),t.ALo(1,"async")),2&s){const e=t.oxw();let n;t.Q6J("src",null==(n=t.lcZ(1,1,e.getCategoryIcon(e.selectedCategory)))?null:n.left)}}function Vi(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().selectCategory(a)}),t._UZ(1,"svg-icon",23),t.ALo(2,"async"),t.ALo(3,"async"),t.TgZ(4,"span"),t._uU(5),t.qZA()()}if(2&s){const e=i.$implicit,n=t.oxw();let o,a;t.xp6(1),t.s9C("matTooltip",null==(o=t.lcZ(3,5,n.getCategoryIcon(e)))?null:o.right),t.Q6J("src",null==(a=t.lcZ(2,3,n.getCategoryIcon(e)))?null:a.left),t.xp6(4),t.hij(" ",e," ")}}function Gi(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"taskana-administration-tree",24),t.NdJ("switchTaskanaSpinnerEmit",function(o){return t.CHM(e),t.oxw().setRequestInProgress(o)}),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("filterText",e.inputValue)("filterIcon",e.selectedCategory)}}function Bi(s,i){1&s&&(t.TgZ(0,"div",26)(1,"h3",27),t._uU(2,"There are no classifications"),t.qZA()())}function Ki(s,i){if(1&s&&t.YNc(0,Bi,3,0,"div",25),2&s){const e=t.oxw();t.Q6J("ngIf",!e.requestInProgress)}}class E{constructor(i,e,n,o,a,r){this.location=i,this.importExportService=e,this.domainService=n,this.requestInProgressService=o,this.store=a,this.ngxsActions$=r,this.taskanaType=et,this.requestInProgress=!0,this.selectedCategory="",this.destroy$=new y.x,this.ngxsActions$.pipe((0,d.xt)(C.gk),(0,p.R)(this.destroy$)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!0)}),this.ngxsActions$.pipe((0,d.cx)(C.gk),(0,p.R)(this.destroy$)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1)})}ngOnInit(){this.classifications$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.classifications=i}),this.classificationTypeSelected$.pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.store.dispatch(new C.gk),this.selectedCategory=""}),this.importExportService.getImportingFinished().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.store.dispatch(new C.gk)}),this.domainService.getSelectedDomain().pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.store.dispatch(C.gk)}),this.requestInProgressService.getRequestInProgress().pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.requestInProgress=i})}addClassification(){this.store.dispatch(new C.NP),this.location.go(this.location.path().replace(/(classifications).*/g,"classifications/new-classification"))}getCategoryIcon(i){return this.categoryIcons$.pipe((0,lt.U)(e=>""===i?{left:e.all,right:"All"}:e[i]?{left:e[i],right:i}:{left:e.missing,right:"Category does not match with the configuration"}))}selectCategory(i){this.selectedCategory=i}setRequestInProgress(i){this.requestInProgressService.setRequestInProgress(i)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}E.\u0275fac=function(i){return new(i||E)(t.Y36(f.Ye),t.Y36(wt),t.Y36(mt.N),t.Y36(_t.K),t.Y36(d.yh),t.Y36(d.eX))},E.\u0275cmp=t.Xpm({type:E,selectors:[["taskana-administration-classification-list"]],decls:31,vars:11,consts:[[1,"classification-list"],[1,"classification-list__action-toolbar"],[1,"classification-list__action-buttons"],["mat-flat-button","","matTooltip","Create new classification",1,"classification-list__add-button","mr-1",3,"click"],[1,"md-20"],[1,"classification-list__import-export",3,"currentSelection","parentComponent"],[1,"classification-list__filter"],[1,"classification-list__category-filter"],["mat-stroked-button","","matTooltip","Filter Category",1,"classification-list__filter-button",3,"matMenuTriggerFor"],[4,"ngIf"],["class","classification-list__icons",3,"src",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",1,"classification-list__all-button",3,"click"],[1,"classification-list__filter-all-icon",2,"color","#555"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"classification-list__input"],["appearance","legacy","floatLabel","auto",1,"classification-list__input-field"],["matInput","","matTooltip","Type to filter classifications",3,"ngModel","ngModelChange"],[1,"pull-right"],[3,"filterText","filterIcon","switchTaskanaSpinnerEmit",4,"ngIf","ngIfElse"],["empty_classifications",""],[1,"classification-list__icons",3,"src"],["mat-menu-item","",3,"click"],[1,"classification-list__categories",3,"src","matTooltip"],[3,"filterText","filterIcon","switchTaskanaSpinnerEmit"],["class","classification-list__no-items",4,"ngIf"],[1,"classification-list__no-items"],[1,"grey"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return e.addClassification()}),t._uU(4," Add "),t.TgZ(5,"mat-icon",4),t._uU(6,"add"),t.qZA()(),t._UZ(7,"taskana-administration-import-export",5),t.qZA(),t.TgZ(8,"div",6)(9,"div",7)(10,"button",8),t.YNc(11,Hi,2,0,"mat-icon",9),t.YNc(12,ji,2,3,"svg-icon",10),t.qZA(),t.TgZ(13,"mat-menu",null,11)(15,"button",12),t.NdJ("click",function(){return e.selectCategory("")}),t.TgZ(16,"span")(17,"mat-icon",13),t._uU(18,"filter_list"),t.qZA(),t._uU(19," All "),t.qZA()(),t.YNc(20,Vi,6,7,"button",14),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"div",15)(23,"mat-form-field",16)(24,"mat-label"),t._uU(25,"Filter classification"),t.qZA(),t.TgZ(26,"input",17),t.NdJ("ngModelChange",function(o){return e.inputValue=o}),t.qZA()()(),t._UZ(27,"taskana-administration-classification-types-selector",18),t.qZA()(),t.YNc(28,Gi,1,2,"taskana-administration-tree",19),t.YNc(29,Ki,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&i){const n=t.MAs(14),o=t.MAs(30);t.xp6(7),t.Q6J("currentSelection",e.taskanaType.CLASSIFICATIONS)("parentComponent","classifications"),t.xp6(3),t.Q6J("matMenuTriggerFor",n),t.xp6(1),t.Q6J("ngIf",""==e.selectedCategory),t.xp6(1),t.Q6J("ngIf",""!=e.selectedCategory),t.xp6(8),t.Q6J("ngForOf",t.lcZ(21,9,e.categories$)),t.xp6(6),t.Q6J("ngModel",e.inputValue),t.xp6(2),t.Q6J("ngIf",e.classifications&&e.classifications.length)("ngIfElse",o)}},directives:[U.lW,P.gM,F.Hw,ae,A.p6,f.O5,Q.bk,A.VK,A.OP,f.sg,I.KE,I.hX,pt.Nt,_.Fj,_.JJ,_.On,B,Yi.e],pipes:[f.Ov],styles:[".classification-list[_ngcontent-%COMP%]{height:100%;line-height:1.5;font-size:1rem}.classification-list__no-items[_ngcontent-%COMP%]{text-align:center;padding-top:150px}.classification-list__action-toolbar[_ngcontent-%COMP%]{padding:16px 16px 0;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.classification-list__action-buttons[_ngcontent-%COMP%]{display:flex;border:none;margin-bottom:0;padding:0 4px}.classification-list__add-button[_ngcontent-%COMP%]{background-color:#22a39f;color:#fff}.classification-list__import-export[_ngcontent-%COMP%]{display:flex}.classification-list__filter[_ngcontent-%COMP%]{display:flex;padding:7px 4px 0}.classification-list__category-filter[_ngcontent-%COMP%]{padding-top:7px}.classification-list__icons[_ngcontent-%COMP%]{height:33px;width:16px;fill:#555}.classification-list__filter-all-icon[_ngcontent-%COMP%]{margin-right:0!important}.classification-list__categories[_ngcontent-%COMP%]{fill:#555;margin:0;top:-2px}.classification-list__filter-button[_ngcontent-%COMP%]{color:#555;top:3px;margin-right:12px}.classification-list__input[_ngcontent-%COMP%]{width:100%;margin-right:12px}.classification-list__input-field[_ngcontent-%COMP%]{width:100%!important}"]}),Ct([(0,d.Ph)(S.G.classificationTypes),yt("design:type",g.y)],E.prototype,"classificationTypes$",void 0),Ct([(0,d.Ph)(S.G.selectedClassificationType),yt("design:type",g.y)],E.prototype,"classificationTypeSelected$",void 0),Ct([(0,d.Ph)(S.G.selectCategories),yt("design:type",g.y)],E.prototype,"categories$",void 0),Ct([(0,d.Ph)(S.G.classifications),yt("design:type",g.y)],E.prototype,"classifications$",void 0),Ct([(0,d.Ph)(rt.x.selectCategoryIcons),yt("design:type",g.y)],E.prototype,"categoryIcons$",void 0);var zi=c(1670),Me=c(5902),Oe=c(5755),Tt=c(9946),It=c(9975),Se=c(1307),Pe=c(6530),At=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},Zt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const ts=["ClassificationForm"];function es(s,i){if(1&s&&(t.TgZ(0,"span",57),t.ALo(1,"async"),t._uU(2),t.ALo(3,"async"),t.qZA()),2&s){const e=t.oxw(2);t.s9C("matTooltip",t.lcZ(1,2,e.badgeMessage$)),t.xp6(2),t.hij(" ",t.lcZ(3,4,e.badgeMessage$)," ")}}function is(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onRemoveClassification()}),t.TgZ(1,"mat-icon",59),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Delete"),t.qZA()()}}function ss(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function ns(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function os(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function as(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",61),t._uU(1," Valid in Domain "),t.TgZ(2,"a",62),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).validChanged()}),t.TgZ(3,"mat-icon",63),t._uU(4),t.qZA()()()}if(2&s){const e=t.oxw(2);t.xp6(4),t.Oqu(e.classification.isValidInDomain?"check_box":"check_box_outline_blank")}}function rs(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function cs(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function ls(s,i){if(1&s&&(t.TgZ(0,"mat-option",64),t._UZ(1,"svg-icon",53),t.ALo(2,"async"),t._uU(3),t.qZA()),2&s){const e=i.$implicit,n=t.oxw(2);let o;t.s9C("value",e),t.xp6(1),t.Q6J("src",null==(o=t.lcZ(2,3,n.getCategoryIcon(e)))?null:o.left),t.xp6(2),t.hij(" ",e," ")}}function ds(s,i){if(1&s&&(t.TgZ(0,"div",60),t._uU(1),t.qZA()),2&s){const e=t.oxw(4);t.xp6(1),t.Oqu(e.lengthError)}}function ps(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",66)(1,"mat-form-field",42)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"label",67),t.TgZ(5,"input",68,69),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().index,r=t.oxw(2);return r.classification[r.getClassificationCustom(a+1)]=o})("input",function(){t.CHM(e);const o=t.MAs(6);return t.oxw(3).validateInputOverflow(o,255)}),t.qZA()(),t.YNc(7,ds,2,1,"div",28),t.qZA()}if(2&s){const e=t.MAs(6),n=t.oxw(),o=n.$implicit,a=n.index,r=t.oxw(2);t.xp6(3),t.Oqu(o.field),t.xp6(1),t.MGl("for","classification-custom-",a+1,""),t.xp6(1),t.MGl("id","classification-custom-",a+1,""),t.s9C("placeholder",o.field),t.MGl("name","classification.custom",a+1,""),t.Q6J("ngModel",r.classification[r.getClassificationCustom(a+1)]),t.xp6(2),t.Q6J("ngIf",r.inputOverflowMap.get(e.name))}}function ms(s,i){if(1&s&&(t.ynx(0),t.YNc(1,ps,8,7,"div",65),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}function _s(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",2)(1,"mat-toolbar",3)(2,"h4",4)(3,"span",5),t._uU(4),t.qZA(),t.YNc(5,es,4,6,"span",6),t.qZA(),t.TgZ(6,"div")(7,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onSubmit()}),t._uU(8," Save "),t.TgZ(9,"mat-icon",8),t._uU(10,"save"),t.qZA()(),t.TgZ(11,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().onRestore()}),t._uU(12," Undo Changes "),t.TgZ(13,"mat-icon",10),t._uU(14,"restore"),t.qZA()(),t.TgZ(15,"button",11)(16,"mat-icon"),t._uU(17,"more_vert"),t.qZA()(),t.TgZ(18,"mat-menu",null,12)(20,"button",13),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCopy()}),t.TgZ(21,"mat-icon",14),t._uU(22,"content_copy"),t.qZA(),t.TgZ(23,"span"),t._uU(24,"Copy"),t.qZA()(),t.YNc(25,is,5,0,"button",15),t.TgZ(26,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().onCloseClassification()}),t.TgZ(27,"mat-icon"),t._uU(28,"close"),t.qZA(),t.TgZ(29,"span"),t._uU(30,"Close"),t.qZA()()()()(),t.TgZ(31,"div",17)(32,"ng-form",null,18)(34,"div",19)(35,"h6",20),t._uU(36," General "),t.qZA(),t._UZ(37,"mat-divider",21),t.TgZ(38,"div",22)(39,"div",23)(40,"mat-form-field",24)(41,"mat-label"),t._uU(42,"Key"),t.qZA(),t._UZ(43,"label",25),t.TgZ(44,"input",26,27),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.key=o})("input",function(){t.CHM(e);const o=t.MAs(45);return t.oxw().validateInputOverflow(o,32)}),t.qZA()(),t.YNc(46,ss,2,1,"div",28),t.TgZ(47,"mat-form-field",24)(48,"mat-label"),t._uU(49,"Name"),t.qZA(),t._UZ(50,"label",29),t.TgZ(51,"input",30,31),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.name=o})("input",function(){t.CHM(e);const o=t.MAs(52);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(53,ns,2,1,"div",28),t.TgZ(54,"mat-form-field",24)(55,"mat-label"),t._uU(56,"Description"),t.qZA(),t._UZ(57,"label",32),t.TgZ(58,"textarea",33,34),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.description=o})("input",function(){t.CHM(e);const o=t.MAs(59);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(60,os,2,1,"div",28),t.qZA(),t._UZ(61,"div",35),t.TgZ(62,"div",36)(63,"mat-form-field",24)(64,"mat-label"),t._uU(65,"Domain"),t.qZA(),t._UZ(66,"label",37),t.TgZ(67,"input",38),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.domain=o}),t.qZA()(),t.YNc(68,as,5,1,"div",39),t.TgZ(69,"div",40)(70,"div",41)(71,"mat-form-field",42)(72,"mat-label"),t._uU(73," Service Level "),t.qZA(),t._UZ(74,"label",43),t.TgZ(75,"input",44,45),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.serviceLevel=o})("input",function(){t.CHM(e);const o=t.MAs(76);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(77,rs,2,1,"div",28),t.qZA(),t.TgZ(78,"div",41)(79,"mat-form-field",42)(80,"mat-label"),t._uU(81,"Priority"),t.qZA(),t._UZ(82,"label",46),t.TgZ(83,"input",47),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.priority=o}),t.qZA()(),t._UZ(84,"taskana-shared-field-error-display",48),t.qZA()(),t.TgZ(85,"mat-form-field",24)(86,"mat-label"),t._uU(87,"Application entry point"),t.qZA(),t._UZ(88,"label",49),t.TgZ(89,"input",50,51),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().classification.applicationEntryPoint=o})("input",function(){t.CHM(e);const o=t.MAs(90);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(91,cs,2,1,"div",28),t.TgZ(92,"mat-form-field",24)(93,"mat-label"),t._uU(94,"Category"),t.qZA(),t.TgZ(95,"mat-select",52),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw().classification.category=o}),t.TgZ(96,"mat-select-trigger"),t._UZ(97,"svg-icon",53),t.ALo(98,"async"),t._uU(99),t.qZA(),t.YNc(100,ls,4,5,"mat-option",54),t.ALo(101,"async"),t.qZA()()()(),t.TgZ(102,"h6",20),t._uU(103," Custom Fields "),t.qZA(),t._UZ(104,"mat-divider",21),t.TgZ(105,"div",55),t.YNc(106,ms,2,1,"ng-container",56),t.ALo(107,"async"),t.qZA()()()()()}if(2&s){const e=t.MAs(19),n=t.MAs(45),o=t.MAs(52),a=t.MAs(59),r=t.MAs(76),l=t.MAs(90),m=t.oxw();let x;t.xp6(3),t.Tol(m.isCreatingNewClassification?"action-toolbar__title-badge":"action-toolbar__title"),t.hYB("matTooltip","",m.classification.name,"\xa0 [",m.classification.type,"]"),t.xp6(1),t.AsE(" ",m.classification.name,"\xa0 [",m.classification.type,"] "),t.xp6(1),t.Q6J("ngIf",m.isCreatingNewClassification),t.xp6(10),t.Q6J("matMenuTriggerFor",e),t.xp6(10),t.Q6J("ngIf",null==m.classification?null:m.classification.classificationId),t.xp6(19),t.Q6J("disabled",!m.isCreatingNewClassification)("ngModel",m.classification.key),t.xp6(2),t.Q6J("ngIf",m.inputOverflowMap.get(n.name)),t.xp6(5),t.Q6J("ngModel",m.classification.name),t.xp6(2),t.Q6J("ngIf",m.inputOverflowMap.get(o.name)),t.xp6(5),t.Q6J("ngModel",m.classification.description),t.xp6(2),t.Q6J("ngIf",m.inputOverflowMap.get(a.name)),t.xp6(7),t.Q6J("ngModel",m.classification.domain),t.xp6(1),t.Q6J("ngIf",!m.masterDomainSelected()),t.xp6(7),t.Q6J("ngModel",m.classification.serviceLevel),t.xp6(2),t.Q6J("ngIf",m.inputOverflowMap.get(r.name)),t.xp6(6),t.Q6J("ngModel",m.classification.priority),t.xp6(1),t.Q6J("displayError",!m.isFieldValid("classification.priority"))("validationTrigger",m.toggleValidationMap.get("classification.priority.name")),t.xp6(5),t.Q6J("ngModel",m.classification.applicationEntryPoint),t.xp6(2),t.Q6J("ngIf",m.inputOverflowMap.get(l.name)),t.xp6(4),t.Q6J("value",m.classification.category),t.xp6(2),t.Q6J("src",null==(x=t.lcZ(98,31,m.getCategoryIcon(m.classification.category)))?null:x.left),t.xp6(2),t.hij(" ",m.classification.category," "),t.xp6(1),t.Q6J("ngForOf",t.lcZ(101,33,m.categories$)),t.xp6(6),t.Q6J("ngForOf",t.lcZ(107,35,m.customFields$))}}class q{constructor(i,e,n,o,a,r,l){this.location=i,this.requestInProgressService=e,this.domainService=n,this.formsValidatorService=o,this.notificationsService=a,this.importExportService=r,this.store=l,this.isCreatingNewClassification=!1,this.lengthError="You have reached the maximum length for this field",this.inputOverflowMap=new Map,this.toggleValidationMap=new Map,this.destroy$=new y.x}ngOnInit(){this.customFields$=this.store.select(rt.x.classificationsCustomisation).pipe((0,lt.U)(i=>i.information),Nt(8)),this.selectedClassification$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.classification=Object.assign({},i),this.isCreatingNewClassification=void 0===this.classification.classificationId}),this.importExportService.getImportingFinished().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.store.dispatch(new C.h2(this.classification.classificationId))}),this.requestInProgressService.getRequestInProgress().pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.requestInProgress=i}),this.formsValidatorService.inputOverflowObservable.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.inputOverflowMap=i}),this.validateInputOverflow=(i,e)=>{this.formsValidatorService.validateInputOverflow(i,e)}}isFieldValid(i){return this.formsValidatorService.isFieldValid(this.classificationForm,i)}onSubmit(){this.formsValidatorService.formSubmitAttempt=!0,(0,Oe.B)(this.classificationForm),this.formsValidatorService.validateFormInformation(this.classificationForm,this.toggleValidationMap).then(i=>{i&&this.onSave()})}onRestore(){this.formsValidatorService.formSubmitAttempt=!1,this.store.dispatch(new C.Mw(this.classification.classificationId)).pipe((0,Z.q)(1)).subscribe(()=>{this.notificationsService.showSuccess("CLASSIFICATION_RESTORE")})}onCopy(){this.isCreatingNewClassification?this.notificationsService.showError("CLASSIFICATION_COPY_NOT_CREATED"):this.store.dispatch(new C.Yw)}onCloseClassification(){this.store.dispatch(new C.VR)}getCategoryIcon(i){return this.categoryIcons$.pipe((0,lt.U)(e=>e[i]?{left:e[i],right:i}:{left:e.missing,right:"Category does not match with the configuration"}))}validChanged(){this.classification.isValidInDomain=!this.classification.isValidInDomain}masterDomainSelected(){return""===this.domainService.getSelectedDomainValue()}getClassificationCustom(i){return`custom${i}`}onSave(){var i=this;return(0,zi.Z)(function*(){if(i.requestInProgressService.setRequestInProgress(!0),void 0===i.classification.classificationId)i.store.dispatch(new C.B6(i.classification)).pipe((0,Z.q)(1)).subscribe(e=>{i.notificationsService.showSuccess("CLASSIFICATION_CREATE",{classificationKey:e.classification.selectedClassification.key}),i.location.go(i.location.path().replace(/(classifications).*/g,`classifications/(detail:${e.classification.selectedClassification.classificationId})`)),i.afterRequest()});else try{i.store.dispatch(new C.H3(i.classification)).pipe((0,Z.q)(1)).subscribe(()=>{i.afterRequest(),i.notificationsService.showSuccess("CLASSIFICATION_UPDATE",{classificationKey:i.classification.key})})}catch(e){i.afterRequest()}})()}onRemoveClassification(){this.notificationsService.showDialog("CLASSIFICATION_DELETE",{classificationKey:this.classification.key},this.removeClassificationConfirmation.bind(this))}removeClassificationConfirmation(){this.requestInProgressService.setRequestInProgress(!0),this.store.dispatch(new C.Nj).pipe((0,Z.q)(1)).subscribe(()=>{this.notificationsService.showSuccess("CLASSIFICATION_REMOVE",{classificationKey:this.classification.key}),this.afterRequest()}),this.location.go(this.location.path().replace(/(classifications).*/g,"classifications"))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}afterRequest(){this.requestInProgressService.setRequestInProgress(!1)}}function gs(s,i){1&s&&t._UZ(0,"taskana-administration-classification-details")}function hs(s,i){1&s&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3,"Select a classification"),t.qZA(),t._UZ(4,"svg-icon",7),t.qZA()())}q.\u0275fac=function(i){return new(i||q)(t.Y36(f.Ye),t.Y36(_t.K),t.Y36(mt.N),t.Y36(Rt.o),t.Y36(ct.g),t.Y36(wt),t.Y36(d.yh))},q.\u0275cmp=t.Xpm({type:q,selectors:[["taskana-administration-classification-details"]],viewQuery:function(i,e){if(1&i&&t.Gf(ts,5),2&i){let n;t.iGM(n=t.CRH())&&(e.classificationForm=n.first)}},decls:2,vars:1,consts:[[1,"classification-details"],["class","classification-details-wrapper","id","classification-details",4,"ngIf"],["id","classification-details",1,"classification-details-wrapper"],[1,"action-toolbar"],[1,"action-toolbar__headline"],[3,"matTooltip"],["class","action-toolbar__badge-message",3,"matTooltip",4,"ngIf"],["mat-button","","matTooltip","Save changes in current classification",1,"action-toolbar__button","action-toolbar__save-button",3,"click"],[1,"md-20"],["mat-stroked-button","","matTooltip","Revert changes to previous saved state",1,"action-toolbar__button",3,"click"],[1,"action-toolbar__aquamarine-button","md-20"],["mat-stroked-button","","matTooltip","More actions","id","action-toolbar__more-buttons",1,"action-toolbar__button",3,"matMenuTriggerFor"],["buttonMenu","matMenu"],["mat-menu-item","","matTooltip","Copy current values to create new classification",1,"action-toolbar__dropdown",3,"click"],[1,"action-toolbar__aquamarine-button"],["mat-menu-item","","class","action-toolbar__dropdown","matTooltip","Delete this classification",3,"click",4,"ngIf"],["mat-menu-item","","matTooltip","Close this classification and discard all changes",1,"action-toolbar__dropdown",2,"border-bottom-style","none",3,"click"],[2,"padding","0"],["ClassificationForm","ngForm"],[1,"detailed-fields"],[1,"detailed-fields__subheading"],[1,"detailed-fields__horizontal-line"],[1,"detailed-fields__general"],[1,"detailed-fields__general-left-column"],["appearance","outline"],["for","classification-key"],["matInput","","required","","type","text","maxlength","32","id","classification-key","placeholder","Key","name","classification.key",3,"disabled","ngModel","ngModelChange","input"],["key","ngModel"],["class","error",4,"ngIf"],["for","classification-name"],["matInput","","type","text","required","","maxlength","255","id","classification-name","placeholder","Name","name","classification.name",3,"ngModel","ngModelChange","input"],["name","ngModel"],["for","classification-description"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","6","cdkAutosizeMaxRows","6","maxlength","255","id","classification-description","placeholder","Description","name","classification.description",3,"ngModel","ngModelChange","input"],["description","ngModel"],[1,"detailed-fields__spacer"],[1,"detailed-fields__general-right-column"],["for","classification-domain"],["matInput","","type","text","disabled","","id","classification-domain","placeholder","Domain","name","classification.domain",3,"ngModel","ngModelChange"],["class","detailed-fields__domain-checkbox",4,"ngIf"],[1,"detailed-fields__service-and-priority"],[2,"width","48%"],["appearance","outline",2,"width","100%"],["for","classification-service-level"],["matInput","","type","text","required","","maxlength","255","id","classification-service-level","placeholder","Service Level","name","classification.serviceLevel",3,"ngModel","ngModelChange","input"],["serviceLevel","ngModel"],["for","classification-priority"],["matInput","","type","number","name","classification.priority","id","classification-priority","required","","min","0",3,"ngModel","ngModelChange"],["errorMessage","* Priority is required",3,"displayError","validationTrigger"],["for","classification-application-entry-point"],["matInput","","type","text","maxlength","255","id","classification-application-entry-point","placeholder","Application entry point","name","classification.applicationEntryPoint",3,"ngModel","ngModelChange","input"],["appEntryPoint","ngModel"],["required","",3,"value","valueChange"],[1,"detailed-fields__category-icon",3,"src"],[3,"value",4,"ngFor","ngForOf"],[1,"detailed-fields__custom-fields"],[4,"ngFor","ngForOf"],[1,"action-toolbar__badge-message",3,"matTooltip"],["mat-menu-item","","matTooltip","Delete this classification",1,"action-toolbar__dropdown",3,"click"],[1,"action-toolbar__red-button"],[1,"error"],[1,"detailed-fields__domain-checkbox"],["title","Valid in Domain",3,"click"],[1,"detailed-fields__domain-checkbox-icon"],[3,"value"],["class","detailed-fields__input-custom-field",4,"ngIf"],[1,"detailed-fields__input-custom-field"],[3,"for"],["matInput","","type","text","maxlength","255",3,"id","placeholder","ngModel","name","ngModelChange","input"],["custom","ngModel"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t.YNc(1,_s,108,37,"div",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngIf",e.classification&&!e.requestInProgress))},directives:[f.O5,Tt.Ye,P.gM,U.lW,F.Hw,A.p6,A.VK,A.OP,_.F,It.d,I.KE,I.hX,pt.Nt,_.Fj,_.Q7,_.nD,_.JJ,_.On,Se.IC,_.qQ,_.wV,Pe.y,tt.gD,tt.$L,Q.bk,f.sg,kt.ey],pipes:[f.Ov],styles:[".classification-details[_ngcontent-%COMP%]{height:calc(100vh - 100px);overflow-y:auto}.classification-details-wrapper[_ngcontent-%COMP%]{position:relative}.action-toolbar[_ngcontent-%COMP%]{padding:8px 30px 12px 24px;height:68px;background-color:#fff;display:flex;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;justify-content:space-between;flex-wrap:wrap;z-index:10}.action-toolbar__headline[_ngcontent-%COMP%]{font-size:1.5rem;padding:0 .5rem .5rem;max-width:calc(100% - 350px)!important}.action-toolbar__title[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis;position:relative;top:8px}.action-toolbar__title-badge[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis}.action-toolbar__badge-message[_ngcontent-%COMP%]{display:block;text-align:center;vertical-align:middle;line-height:20px;font-size:1rem;background-color:#c0c0c0a6;border-radius:4px;overflow:hidden;text-overflow:ellipsis}.action-toolbar__button[_ngcontent-%COMP%]{margin-top:.25rem;margin-right:6px;background-color:#fff}.action-toolbar__dropdown[_ngcontent-%COMP%]{border-color:#c0c0c0a6;border-bottom-style:solid;border-width:1px}.action-toolbar__save-button[_ngcontent-%COMP%]{background-color:#22a39f;color:#fff}.action-toolbar__aquamarine-button[_ngcontent-%COMP%]{color:#22a39f}.action-toolbar__red-button[_ngcontent-%COMP%]{color:#d82626}.detailed-fields[_ngcontent-%COMP%]{padding:15px;display:flex;flex-direction:column}.detailed-fields__subheading[_ngcontent-%COMP%]{font-weight:700;line-height:1.5;padding-left:15px;margin-bottom:0;margin-top:24px}.detailed-fields__horizontal-line[_ngcontent-%COMP%]{margin:5px 5px 25px;border-top-color:#555;border-top-width:1.35px}.detailed-fields__general[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.detailed-fields__general-right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.detailed-fields__spacer[_ngcontent-%COMP%]{display:block;width:20px}.detailed-fields__general-left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;width:50%}.detailed-fields__domain-checkbox[_ngcontent-%COMP%]{position:absolute;top:172px;right:12px;font-size:12px;color:#555}.detailed-fields__domain-checkbox-icon[_ngcontent-%COMP%]{cursor:pointer;margin-top:2px;font-size:18px}.detailed-fields__service-and-priority[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.detailed-fields__category-icon[_ngcontent-%COMP%]{fill:#555;margin-right:5px;top:-2px}.detailed-fields__custom-fields[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.detailed-fields__input-custom-field[_ngcontent-%COMP%]{flex:0 49%}input[_ngcontent-%COMP%]:invalid.dirty{border-color:#d82626}"],data:{animation:[Me.C]}}),At([(0,d.Ph)(S.G.selectCategories),Zt("design:type",g.y)],q.prototype,"categories$",void 0),At([(0,d.Ph)(rt.x.selectCategoryIcons),Zt("design:type",g.y)],q.prototype,"categoryIcons$",void 0),At([(0,d.Ph)(S.G.selectedClassificationType),Zt("design:type",g.y)],q.prototype,"selectedClassificationType$",void 0),At([(0,d.Ph)(S.G.selectedClassification),Zt("design:type",g.y)],q.prototype,"selectedClassification$",void 0),At([(0,d.Ph)(S.G.getBadgeMessage),Zt("design:type",g.y)],q.prototype,"badgeMessage$",void 0);class V{constructor(i,e){this.route=i,this.store=e,this.showDetail=!1,this.destroy$=new y.x}ngOnInit(){this.route.firstChild&&this.route.firstChild.params.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.routerParams=i,this.routerParams.id&&(this.showDetail=!0,this.store.dispatch(new C.h2(this.routerParams.id)).subscribe(()=>this.store.dispatch(new C.gk))),this.routerParams.id&&-1!==this.routerParams.id.indexOf("new-classification")&&this.store.dispatch(new C.NP)}),this.selectedClassification$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.showDetail=!!i})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}V.\u0275fac=function(i){return new(i||V)(t.Y36(j.gz),t.Y36(d.yh))},V.\u0275cmp=t.Xpm({type:V,selectors:[["taskana-administration-classification-overview"]],decls:6,vars:2,consts:[[1,"classification-overview"],[1,"vertical-right-divider"],[4,"ngIf","ngIfElse"],["showEmptyPage",""],[1,"classification-overview__empty-page"],[1,"center-block","no-detail"],[1,"grey","select-classification"],["src","./assets/icons/classification-empty.svg",1,"img-responsive","empty-icon"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0),t._UZ(1,"taskana-administration-classification-list")(2,"div",1),t.YNc(3,gs,1,0,"taskana-administration-classification-details",2),t.YNc(4,hs,5,0,"ng-template",null,3,t.W1O),t.qZA()),2&i){const n=t.MAs(5);t.xp6(3),t.Q6J("ngIf",e.showDetail)("ngIfElse",n)}},directives:[E,f.O5,q,Q.bk],styles:[".classification-overview[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;overflow:hidden;align-items:stretch}.classification-overview__empty-page[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:center;align-items:center}taskana-administration-classification-list[_ngcontent-%COMP%]{min-width:500px;max-width:500px;height:100%}taskana-administration-classification-details[_ngcontent-%COMP%]{flex-grow:1}"]}),function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);o>3&&a&&Object.defineProperty(i,e,a)}([(0,d.Ph)(S.G.selectedClassification),function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,g.y)],V.prototype,"selectedClassification$",void 0);var w=c(3644),h=c(4531),re=c(6152),ce=c(9787),bs=c(2925),De=c(7549),Fe=c(3889),Ee=c(3118);function xs(s,i){if(1&s&&t._UZ(0,"taskana-administration-import-export",12),2&s){const e=t.oxw();t.Q6J("currentSelection",e.selectionToImport)("parentComponent","workbaskets")}}function ws(s,i){1&s&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function Cs(s,i){1&s&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}class it{constructor(i,e){this.store=i,this.workbasketService=e,this.workbasketListExpanded=!0,this.performSorting=new t.vpe,this.selectionToImport=et.WORKBASKETS,this.sortingFields=at.Jm,this.isExpanded=!1,this.showFilter=!1,this.destroy$=new y.x}ngOnInit(){this.workbasketActiveAction$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.action=i})}sorting(i){this.performSorting.emit(i)}addWorkbasket(){this.action!==Fe.o.CREATE&&this.store.dispatch(new h.FX)}onClickFilter(){this.isExpanded=!this.isExpanded,this.workbasketService.expandWorkbasketActionToolbar(this.isExpanded)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}it.\u0275fac=function(i){return new(i||it)(t.Y36(d.yh),t.Y36(re.V))},it.\u0275cmp=t.Xpm({type:it,selectors:[["taskana-administration-workbasket-list-toolbar"]],inputs:{workbasketListExpanded:"workbasketListExpanded",workbaskets:"workbaskets",workbasketDefaultSortBy:"workbasketDefaultSortBy"},outputs:{performSorting:"performSorting"},decls:15,vars:6,consts:[[1,"workbasket-list-toolbar"],[1,"workbasket-list-toolbar__action-toolbar"],["mat-flat-button","","matTooltip","Create new workbasket",1,"workbasket-list-toolbar__add-button","mr-1",3,"click"],[1,"md-20"],[3,"currentSelection","parentComponent",4,"ngIf"],[1,"workbasket-details__spacer",2,"flex","1 1 auto"],[2,"margin-right","4px",3,"sortingFields","defaultSortBy","performSorting"],[1,"workbasket-list-toolbar__filter"],["mat-stroked-button","","matTooltip","Display more filter options",1,"filter__filter-button",3,"click"],[4,"ngIf"],[1,"filter__filter-component-wrapper"],["component","workbasketList",3,"isExpanded"],[3,"currentSelection","parentComponent"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return e.addWorkbasket()}),t._uU(3," Add "),t.TgZ(4,"mat-icon",3),t._uU(5,"add"),t.qZA()(),t.YNc(6,xs,1,2,"taskana-administration-import-export",4),t._UZ(7,"span",5),t.TgZ(8,"taskana-shared-sort",6),t.NdJ("performSorting",function(o){return e.sorting(o)}),t.qZA()(),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return e.onClickFilter()}),t.YNc(11,ws,2,0,"mat-icon",9),t.YNc(12,Cs,2,0,"mat-icon",9),t.qZA(),t.TgZ(13,"div",10),t._UZ(14,"taskana-shared-workbasket-filter",11),t.qZA()()()),2&i&&(t.xp6(6),t.Q6J("ngIf",e.workbasketListExpanded),t.xp6(2),t.Q6J("sortingFields",e.sortingFields)("defaultSortBy",e.workbasketDefaultSortBy),t.xp6(3),t.Q6J("ngIf",!e.isExpanded),t.xp6(1),t.Q6J("ngIf",e.isExpanded),t.xp6(2),t.Q6J("isExpanded",e.isExpanded))},directives:[U.lW,P.gM,F.Hw,f.O5,ae,Ce.x,Ee.S],styles:[".workbasket-list-toolbar[_ngcontent-%COMP%]{padding:16px 16px 20px;flex-wrap:wrap;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;overflow:hidden}.workbasket-list-toolbar__action-toolbar[_ngcontent-%COMP%]{padding:0 4px;display:flex;border:none;margin-bottom:0}.workbasket-list-toolbar__filter-and-sorting[_ngcontent-%COMP%]{display:flex;border:none;margin-bottom:0;padding:16px 4px 8px}.workbasket-list-toolbar__add-button[_ngcontent-%COMP%]{background-color:#22a39f;color:#fff;height:36px}.workbasket-list-toolbar__filter[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px 8px 0 4px}.filter__filter-button[_ngcontent-%COMP%]{padding:0 5px;color:#555;height:36px}.filter__filter-component-wrapper[_ngcontent-%COMP%]{width:380px}"],data:{animation:[De.j$]}}),function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);o>3&&a&&Object.defineProperty(i,e,a)}([(0,d.Ph)(w.L.workbasketActiveAction),function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata("design:type",i)}(0,g.y)],it.prototype,"workbasketActiveAction$",void 0);var Mt=c(6131),le=c(4324),ys=c(3556),Lt=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},Qt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const Ts=["workbasket"],Is=["wbToolbar"];function As(s,i){if(1&s&&(t.TgZ(0,"div",18),t._UZ(1,"taskana-administration-icon-type",19),t.qZA()),2&s){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("type",e.type)("selected",e.workbasketId===n.selectedId)}}function Zs(s,i){if(1&s&&(t.TgZ(0,"div",20)(1,"span",21),t._uU(2,"error"),t.qZA()()),2&s){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Gre("material-icons md-20 ",e.workbasketId===n.selectedId?"white":"red"," ")}}function Ms(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"mat-list-option",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).selectWorkbasket(a.workbasketId)}),t.TgZ(1,"div",12),t.YNc(2,As,2,2,"div",13),t.TgZ(3,"div",14)(4,"div",15)(5,"b"),t._uU(6),t.qZA(),t._uU(7,", "),t.TgZ(8,"i"),t._uU(9),t.qZA()(),t.TgZ(10,"p",16),t._uU(11),t.qZA(),t.TgZ(12,"p",16),t._uU(13),t.qZA(),t.YNc(14,Zs,3,3,"div",17),t.qZA()(),t._UZ(15,"mat-divider"),t.qZA()}if(2&s){const e=i.$implicit,n=t.oxw(2);t.Q6J("selected",e.workbasketId==n.selectedId)("value",e.workbasketId),t.xp6(2),t.Q6J("ngIf",n.expanded),t.xp6(4),t.Oqu(e.name),t.xp6(3),t.Oqu(e.key),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.owner),t.xp6(1),t.Q6J("ngIf",e.markedForDeletion)}}function Os(s,i){if(1&s&&(t.TgZ(0,"div",7)(1,"mat-selection-list",8,9),t.YNc(3,Ms,16,8,"mat-list-option",10),t.ALo(4,"async"),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("multiple",!1),t.xp6(2),t.Q6J("ngForOf",t.lcZ(4,2,e.workbasketsSummary$))}}function Ss(s,i){1&s&&(t.TgZ(0,"div",23)(1,"h3",24),t._uU(2,"There are no workbaskets"),t.qZA()())}function Ps(s,i){if(1&s&&t.YNc(0,Ss,3,0,"div",22),2&s){const e=t.oxw();t.Q6J("ngIf",!e.requestInProgress&&!e.requestInProgressLocal)}}class W{constructor(i,e,n,o,a,r,l){this.store=i,this.workbasketService=e,this.orientationService=n,this.importExportService=o,this.domainService=a,this.requestInProgressService=r,this.ngxsActions$=l,this.selectedId="",this.type="workbaskets",this.workbasketDefaultSortBy=at.De.NAME,this.sort={"sort-by":this.workbasketDefaultSortBy,order:at.Nm.ASC},this.filterBy={},this.pageParameter={page:1,"page-size":9},this.requestInProgressLocal=!1,this.resetPagingSubject=new y.x,this.destroy$=new y.x,this.ngxsActions$.pipe((0,d.xt)(h.Zk),(0,p.R)(this.destroy$)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!0),this.requestInProgressLocal=!0}),this.ngxsActions$.pipe((0,d.cx)(h.Zk),(0,p.R)(this.destroy$)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1),this.requestInProgressLocal=!1})}ngOnInit(){this.requestInProgressService.setRequestInProgress(!0),this.selectedWorkbasket$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.selectedId=void 0!==i?i.workbasketId:void 0}),this.workbasketService.workbasketSavedTriggered().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.performRequest()}),this.orientationService.getOrientation().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.refreshWorkbasketList()}),this.importExportService.getImportingFinished().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.refreshWorkbasketList()}),this.domainService.getSelectedDomain().pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.filterBy.domain=[i],this.performRequest()}),this.workbasketService.getWorkbasketActionToolbarExpansion().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!0),setTimeout(()=>{this.refreshWorkbasketList()},1)}),this.requestInProgressService.getRequestInProgress().pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.requestInProgress=i}),this.getWorkbasketListFilter$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.performFilter(i)})}selectWorkbasket(i){this.requestInProgressService.setRequestInProgress(!0),this.selectedId===i?this.store.dispatch(new h.nK).subscribe(()=>this.requestInProgressService.setRequestInProgress(!1)):this.store.dispatch(new h.b(i)).subscribe(()=>this.requestInProgressService.setRequestInProgress(!1))}performSorting(i){this.sort=i,this.performRequest()}performFilter(i){const e=this.filterBy.domain;this.filterBy=Object.assign({},i),this.filterBy.domain=e,this.resetPagingSubject.next(null)}changePage(i){this.pageParameter.page=i,this.performRequest()}refreshWorkbasketList(){this.pageParameter["page-size"]=this.orientationService.calculateNumberItemsList(window.innerHeight,92,200+this.toolbarElement.nativeElement.offsetHeight,!1),this.performRequest()}performRequest(){this.store.dispatch(new h.Zk(!0,this.filterBy,this.sort,this.pageParameter)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}W.\u0275fac=function(i){return new(i||W)(t.Y36(d.yh),t.Y36(re.V),t.Y36(bs.T),t.Y36(wt),t.Y36(mt.N),t.Y36(_t.K),t.Y36(d.eX))},W.\u0275cmp=t.Xpm({type:W,selectors:[["taskana-administration-workbasket-list"]],viewQuery:function(i,e){if(1&i&&(t.Gf(Ts,5),t.Gf(Is,7)),2&i){let n;t.iGM(n=t.CRH())&&(e.workbasketList=n.first),t.iGM(n=t.CRH())&&(e.toolbarElement=n.first)}},inputs:{expanded:"expanded"},decls:15,vars:24,consts:[[1,"workbasket-list"],[1,"workbasket-list__toolbar"],["wbToolbar",""],[3,"workbaskets","workbasketDefaultSortBy","workbasketListExpanded","performSorting"],["class","workbasket-list__list-items",4,"ngIf","ngIfElse"],["empty_workbaskets",""],[3,"page","type","expanded","numberOfItems","resetPaging","changePage"],[1,"workbasket-list__list-items"],[3,"multiple"],["workbasket",""],["class","workbasket-list__list-item",3,"selected","value","click",4,"ngFor","ngForOf"],[1,"workbasket-list__list-item",3,"selected","value","click"],[1,"workbasket-list__list-item--wrapper"],["class","workbasket-list__list-item--icon",4,"ngIf"],[1,"workbasket-list__list-item--info"],[1,"workbasket-list__list-item--wrap"],[1,"workbasket-list__list-item--no-wrap"],["class","workbasket-list__list-item--marked",4,"ngIf"],[1,"workbasket-list__list-item--icon"],["size","large","tooltip","true",3,"type","selected"],[1,"workbasket-list__list-item--marked"],["title","Marked for deletion","data-toggle","tooltip"],["class","workbasket-list__no-items",4,"ngIf"],[1,"workbasket-list__no-items"],[1,"grey"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"section",1,2)(3,"taskana-administration-workbasket-list-toolbar",3),t.NdJ("performSorting",function(o){return e.performSorting(o)}),t.ALo(4,"async"),t.qZA()(),t.YNc(5,Os,5,4,"div",4),t.ALo(6,"async"),t.ALo(7,"async"),t.YNc(8,Ps,1,1,"ng-template",null,5,t.W1O),t.qZA(),t.TgZ(10,"taskana-shared-pagination",6),t.NdJ("changePage",function(o){return e.changePage(o)}),t.ALo(11,"async"),t.ALo(12,"async"),t.ALo(13,"async"),t.ALo(14,"async"),t.qZA()),2&i){const n=t.MAs(9);let o,a,r;t.xp6(3),t.Q6J("workbaskets",t.lcZ(4,10,e.workbasketsSummary$))("workbasketDefaultSortBy",e.workbasketDefaultSortBy)("workbasketListExpanded",e.expanded),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,12,e.workbasketsSummary$)&&(null==(o=t.lcZ(7,14,e.workbasketsSummary$))?null:o.length)>0)("ngIfElse",n),t.xp6(5),t.Q6J("page",t.lcZ(11,16,e.workbasketsSummaryRepresentation$)?null==(a=t.lcZ(12,18,e.workbasketsSummaryRepresentation$))?null:a.page:t.lcZ(13,20,e.workbasketsSummaryRepresentation$))("type",e.type)("expanded",e.expanded)("numberOfItems",null==(r=t.lcZ(14,22,e.workbasketsSummary$))?null:r.length)("resetPaging",e.resetPagingSubject.asObservable())}},directives:[it,f.O5,Mt.Ub,f.sg,Mt.vS,le.l,It.d,ys.Q],pipes:[f.Ov],styles:[".workbasket-list[_ngcontent-%COMP%]{height:calc(100vh - 156px);overflow-y:hidden}.workbasket-list__list-items[_ngcontent-%COMP%]{overflow-y:hidden}.workbasket-list__list-item--wrapper[_ngcontent-%COMP%]{display:flex}.workbasket-list__list-item--icon[_ngcontent-%COMP%]{padding:32px 32px 32px 16px}.workbasket-list__list-item--info[_ngcontent-%COMP%]{display:block;overflow:hidden;padding:8px 0;line-height:1.3em}.workbasket-list__list-item--wrap[_ngcontent-%COMP%]{word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.workbasket-list__list-item--no-wrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.workbasket-list__no-items[_ngcontent-%COMP%]{text-align:center;padding-top:150px}p[_ngcontent-%COMP%]{margin:0;max-height:20px}.mat-list-item[_ngcontent-%COMP%]{height:90px!important;overflow:hidden}.mat-list-single-selected-option[_ngcontent-%COMP%]{background-color:#246972!important;color:#fff}"]}),Lt([(0,d.Ph)(w.L.workbasketsSummary),Qt("design:type",g.y)],W.prototype,"workbasketsSummary$",void 0),Lt([(0,d.Ph)(w.L.workbasketsSummaryRepresentation),Qt("design:type",g.y)],W.prototype,"workbasketsSummaryRepresentation$",void 0),Lt([(0,d.Ph)(w.L.selectedWorkbasket),Qt("design:type",g.y)],W.prototype,"selectedWorkbasket$",void 0),Lt([(0,d.Ph)(ce.q.getWorkbasketListFilter),Qt("design:type",g.y)],W.prototype,"getWorkbasketListFilter$",void 0);var qe=c(6936),Ds=c(7885),Re=c(1944),Ne=c(4987),Fs=c(7543),de=c(3945),Es=c(1817);const qs=(0,Fs.d)(s=>function(e=null){s(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e});function Ue(s,i){const{first:e,each:n,with:o=Rs,scheduler:a=(null!=i?i:qe.z),meta:r=null}=(0,Ds.q)(s)?{first:s}:"number"==typeof s?{each:s}:s;if(null==e&&null==n)throw new TypeError("No timeout provided.");return(0,Re.e)((l,m)=>{let x,u,st=null,gt=0;const Pt=N=>{u=(0,Es.f)(m,a,()=>{try{x.unsubscribe(),(0,Ne.Xf)(o({meta:r,lastValue:st,seen:gt})).subscribe(m)}catch(so){m.error(so)}},N)};x=l.subscribe((0,de.x)(m,N=>{null==u||u.unsubscribe(),gt++,m.next(st=N),n>0&&Pt(n)},void 0,void 0,()=>{(null==u?void 0:u.closed)||null==u||u.unsubscribe(),st=null})),!gt&&Pt(null!=e?"number"==typeof e?e:+e-a.now():n)})}function Rs(s){throw new qs(s)}var We=c(745),Je=c(3158),ut=c(116),M=c(5050),Yt=c(2938),ft=c(2379),Us=c(1655),Ws=c(5632),pe=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},me=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const Js=["WorkbasketForm"];function $s(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function Ls(s,i){if(1&s&&t._UZ(0,"taskana-shared-field-error-display",46),2&s){const e=t.oxw(2);t.Q6J("displayError",!e.isFieldValid("workbasket.key"))("validationTrigger",e.toggleValidationMap.get("workbasket.key"))}}function Qs(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function Ys(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"taskana-shared-type-ahead",47),t.NdJ("isFormValid",function(o){return t.CHM(e),t.oxw(2).isOwnerValid=o})("accessIdEventEmitter",function(o){return t.CHM(e),t.oxw(2).onSelectedOwner(o)}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("savedAccessId",e.workbasket.owner)("entityId",e.workbasket.workbasketId)("displayError",!0)}}function Hs(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(3);t.xp6(1),t.Oqu(e.lengthError)}}function js(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"input",48,49),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw(2).workbasket.owner=o})("input",function(){t.CHM(e);const o=t.MAs(1);return t.oxw(2).validateInputOverflow(o,128)}),t.qZA(),t.YNc(2,Hs,2,1,"div",13),t._UZ(3,"taskana-shared-field-error-display",50)}if(2&s){const e=t.MAs(1),n=t.oxw(2);t.Q6J("ngModel",n.workbasket.owner),t.xp6(2),t.Q6J("ngIf",n.inputOverflowMap.get(e.name)),t.xp6(1),t.Q6J("displayError",!n.isFieldValid("workbasket.owner"))("validationTrigger",n.toggleValidationMap.get("workbasket.owner"))}}function Vs(s,i){if(1&s&&(t.TgZ(0,"mat-option",51),t._UZ(1,"taskana-administration-icon-type",52),t.qZA()),2&s){const e=i.$implicit;t.s9C("value",e.key),t.xp6(1),t.Q6J("type",e.key)("text",e.value)}}function Gs(s,i){if(1&s&&(t.TgZ(0,"mat-error",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij("",e.lengthError," ")}}function Bs(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function Ks(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function zs(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function Xs(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Oqu(e.lengthError)}}function tn(s,i){if(1&s&&(t.TgZ(0,"div",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(4);t.xp6(1),t.Oqu(e.lengthError)}}function en(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",54)(1,"mat-form-field",55)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"label",56),t.TgZ(5,"input",57,58),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().index,r=t.oxw(2);return r.workbasket[r.getWorkbasketCustomProperty(a+1)]=o})("input",function(){t.CHM(e);const o=t.MAs(6);return t.oxw(3).validateInputOverflow(o,255)}),t.qZA()(),t.YNc(7,tn,2,1,"div",13),t.qZA()}if(2&s){const e=t.MAs(6),n=t.oxw(),o=n.$implicit,a=n.index,r=t.oxw(2);t.xp6(3),t.Oqu(o.field),t.xp6(1),t.MGl("for","wb-custom-",a+1,""),t.xp6(1),t.MGl("id","wb-custom-",a+1,"")("name","workbasket[",r.getWorkbasketCustomProperty(a+1),"]"),t.Q6J("placeholder",o.field)("ngModel",r.workbasket[r.getWorkbasketCustomProperty(a+1)]),t.xp6(2),t.Q6J("ngIf",r.inputOverflowMap.get(e.name))}}function sn(s,i){if(1&s&&(t.ynx(0),t.YNc(1,en,8,7,"div",53),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}function nn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"ng-form",null,3)(4,"div",4)(5,"h6",5),t._uU(6," General "),t.qZA(),t._UZ(7,"mat-divider",6),t.TgZ(8,"div",7)(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),t._uU(12,"Key"),t.qZA(),t._UZ(13,"label",10),t.TgZ(14,"input",11,12),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.key=o})("input",function(o){t.CHM(e);const a=t.MAs(15);return t.oxw().validateInputOverflow(a,64,o)}),t.qZA()(),t.YNc(16,$s,2,1,"div",13),t.YNc(17,Ls,1,2,"taskana-shared-field-error-display",14),t.TgZ(18,"mat-form-field",9)(19,"mat-label"),t._uU(20,"Name"),t.qZA(),t._UZ(21,"label",15),t.TgZ(22,"input",16,17),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.name=o})("input",function(){t.CHM(e);const o=t.MAs(23);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(24,Qs,2,1,"div",13),t._UZ(25,"taskana-shared-field-error-display",18),t.YNc(26,Ys,1,3,"taskana-shared-type-ahead",19),t.YNc(27,js,4,4,"ng-template",null,20,t.W1O),t.TgZ(29,"div",21)(30,"mat-form-field",22)(31,"mat-label"),t._uU(32,"Type"),t.qZA(),t.TgZ(33,"mat-select",23),t.NdJ("valueChange",function(o){return t.CHM(e),t.oxw().workbasket.type=o}),t.TgZ(34,"mat-select-trigger"),t._UZ(35,"taskana-administration-icon-type",24),t._uU(36),t.qZA(),t.YNc(37,Vs,2,3,"mat-option",25),t.ALo(38,"removeEmptyType"),t.ALo(39,"mapValues"),t.qZA()(),t.TgZ(40,"div",26)(41,"mat-form-field",27)(42,"mat-label"),t._uU(43,"Description"),t.qZA(),t._UZ(44,"label",28),t.TgZ(45,"textarea",29,30),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.description=o})("input",function(){t.CHM(e);const o=t.MAs(46);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(47,Gs,2,1,"mat-error",13),t.qZA()()(),t._UZ(48,"div",31),t.TgZ(49,"div",32)(50,"mat-form-field",9)(51,"mat-label"),t._uU(52,"Domain"),t.qZA(),t._UZ(53,"label",33),t.TgZ(54,"input",34),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.domain=o}),t.qZA()(),t.TgZ(55,"mat-form-field",9)(56,"mat-label"),t._uU(57,"OrgLevel 1"),t.qZA(),t.TgZ(58,"input",35,36),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.orgLevel1=o})("input",function(){t.CHM(e);const o=t.MAs(59);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(60,Bs,2,1,"div",13),t.TgZ(61,"mat-form-field",9)(62,"mat-label"),t._uU(63,"OrgLevel 2"),t.qZA(),t.TgZ(64,"input",37,38),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.orgLevel2=o})("input",function(){t.CHM(e);const o=t.MAs(65);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(66,Ks,2,1,"div",13),t.TgZ(67,"mat-form-field",9)(68,"mat-label"),t._uU(69,"OrgLevel 3"),t.qZA(),t.TgZ(70,"input",39,40),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.orgLevel3=o})("input",function(){t.CHM(e);const o=t.MAs(71);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(72,zs,2,1,"div",13),t.TgZ(73,"mat-form-field",9)(74,"mat-label"),t._uU(75,"OrgLevel 4"),t.qZA(),t.TgZ(76,"input",41,42),t.NdJ("ngModelChange",function(o){return t.CHM(e),t.oxw().workbasket.orgLevel4=o})("input",function(){t.CHM(e);const o=t.MAs(77);return t.oxw().validateInputOverflow(o,255)}),t.qZA()(),t.YNc(78,Xs,2,1,"div",13),t.qZA()(),t.TgZ(79,"h6",5),t._uU(80," Custom Fields "),t.qZA(),t._UZ(81,"mat-divider",6),t.TgZ(82,"div",43),t.YNc(83,sn,2,1,"ng-container",44),t.ALo(84,"async"),t.qZA()()()()()}if(2&s){const e=t.MAs(15),n=t.MAs(23),o=t.MAs(28),a=t.MAs(46),r=t.MAs(59),l=t.MAs(65),m=t.MAs(71),x=t.MAs(77),u=t.oxw();t.xp6(14),t.Q6J("disabled",0==u.action||3==u.action)("ngModel",u.workbasket.key),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(e.name)),t.xp6(1),t.Q6J("ngIf",3!=u.action),t.xp6(5),t.Q6J("ngModel",u.workbasket.name),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(n.name)),t.xp6(1),t.Q6J("displayError",!u.isFieldValid("workbasket.name"))("validationTrigger",u.toggleValidationMap.get("workbasket.name")),t.xp6(1),t.Q6J("ngIf",u.lookupField)("ngIfElse",o),t.xp6(7),t.Q6J("value",u.workbasket.type),t.xp6(2),t.Q6J("type",u.workbasket.type),t.xp6(1),t.hij(" ",u.allTypes.get(u.workbasket.type)," "),t.xp6(1),t.Q6J("ngForOf",t.lcZ(38,26,t.lcZ(39,28,u.allTypes))),t.xp6(8),t.Q6J("ngModel",u.workbasket.description),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(a.name)),t.xp6(7),t.Q6J("ngModel",u.workbasket.domain),t.xp6(4),t.Q6J("ngModel",u.workbasket.orgLevel1),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(r.name)),t.xp6(4),t.Q6J("ngModel",u.workbasket.orgLevel2),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(l.name)),t.xp6(4),t.Q6J("ngModel",u.workbasket.orgLevel3),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(m.name)),t.xp6(4),t.Q6J("ngModel",u.workbasket.orgLevel4),t.xp6(2),t.Q6J("ngIf",u.inputOverflowMap.get(x.name)),t.xp6(5),t.Q6J("ngForOf",t.lcZ(84,30,u.customFields$))}}class G{constructor(i,e,n,o,a){this.workbasketService=i,this.requestInProgressService=e,this.formsValidatorService=n,this.notificationService=o,this.store=a,this.toggleValidationMap=new Map,this.lookupField=!1,this.isOwnerValid=!0,this.lengthError="You have reached the maximum length for this field",this.inputOverflowMap=new Map,this.destroy$=new y.x}ngOnInit(){this.allTypes=new Map([["PERSONAL","Personal"],["GROUP","Group"],["CLEARANCE","Clearance"],["TOPIC","Topic"]]),this.customFields$=this.workbasketsCustomisation$.pipe((0,lt.U)(i=>i.information),Nt(4)),this.workbasketsCustomisation$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{i.information.owner&&(this.lookupField=i.information.owner.lookupField)}),this.formsValidatorService.inputOverflowObservable.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.inputOverflowMap=i}),this.validateInputOverflow=(i,e)=>{void 0!==i.value&&this.formsValidatorService.validateInputOverflow(i,e)},this.buttonAction$.pipe((0,p.R)(this.destroy$)).pipe((0,ut.h)(i=>void 0!==i)).subscribe(i=>{switch(i){case M.W.SAVE:this.onSubmit();break;case M.W.UNDO:this.onUndo();break;case M.W.REMOVE_AS_DISTRIBUTION_TARGETS:this.removeDistributionTargets();break;case M.W.DELETE:this.removeWorkbasket()}})}ngOnChanges(i){this.workbasketClone=Object.assign({},this.workbasket)}onSubmit(){this.formsValidatorService.formSubmitAttempt=!0,(0,Oe.B)(this.workbasketForm),this.formsValidatorService.validateFormInformation(this.workbasketForm,this.toggleValidationMap).then(i=>{i&&this.isOwnerValid?this.onSave():this.notificationService.showError("WORKBASKET_SAVE")})}isFieldValid(i){return this.formsValidatorService.isFieldValid(this.workbasketForm,i)}onUndo(){this.formsValidatorService.formSubmitAttempt=!1,this.notificationService.showSuccess("WORKBASKET_RESTORE"),this.workbasket=Object.assign({},this.workbasketClone)}removeWorkbasket(){this.notificationService.showDialog("WORKBASKET_DELETE",{workbasketKey:this.workbasket.key},this.onRemoveConfirmed.bind(this))}removeDistributionTargets(){this.store.dispatch(new h.cy(this.workbasket._links.removeDistributionTargets.href))}onSave(){this.beforeRequest(),this.workbasket.workbasketId?this.store.dispatch(new h.yu(this.workbasket._links.self.href,this.workbasket)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1),this.workbasketClone=(0,Yt.cloneDeep)(this.workbasket)}):this.postNewWorkbasket()}beforeRequest(){this.requestInProgressService.setRequestInProgress(!0)}afterRequest(){this.requestInProgressService.setRequestInProgress(!1),this.workbasketService.triggerWorkBasketSaved()}postNewWorkbasket(){this.addDateToWorkbasket(),this.store.dispatch(new h.BS(this.workbasket)).subscribe(()=>{this.afterRequest()})}addDateToWorkbasket(){const i=oe.H.getDate();this.workbasket.created=i,this.workbasket.modified=i}onRemoveConfirmed(){this.beforeRequest(),this.store.dispatch(new h.ef(this.workbasket._links.self.href)).subscribe(()=>{this.afterRequest()})}onSelectedOwner(i){this.workbasket.owner=i.accessId}getWorkbasketCustomProperty(i){return`custom${i}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}G.\u0275fac=function(i){return new(i||G)(t.Y36(re.V),t.Y36(_t.K),t.Y36(Rt.o),t.Y36(ct.g),t.Y36(d.yh))},G.\u0275cmp=t.Xpm({type:G,selectors:[["taskana-administration-workbasket-information"]],viewQuery:function(i,e){if(1&i&&t.Gf(Js,5),2&i){let n;t.iGM(n=t.CRH())&&(e.workbasketForm=n.first)}},inputs:{workbasket:"workbasket",action:"action"},features:[t.TTD],decls:1,vars:1,consts:[["id","wb-information",4,"ngIf"],["id","wb-information"],[1,"workbasket-information-wrapper"],["WorkbasketForm","ngForm"],[1,"form"],[1,"subheading"],[1,"horizontal-line"],[1,"general"],[1,"general__left-column"],["appearance","outline"],["for","workbasket-key"],["matInput","","required","","type","text","maxlength","64","id","workbasket-key","placeholder","Key","name","workbasket.key",3,"disabled","ngModel","ngModelChange","input"],["key","ngModel"],["class","error",4,"ngIf"],["errorMessage","* Key is required",3,"displayError","validationTrigger",4,"ngIf"],["for","workbasket-name"],["matInput","","type","text","required","","maxlength","255","id","workbasket-name","placeholder","Name","name","workbasket.name",3,"ngModel","ngModelChange","input"],["name","ngModel"],["errorMessage","* Name is required",3,"displayError","validationTrigger"],["placeHolderMessage","Owner",3,"savedAccessId","entityId","displayError","isFormValid","accessIdEventEmitter",4,"ngIf","ngIfElse"],["ownerInput",""],[1,"general__description-and-type"],["appearance","outline",2,"width","28%"],[3,"value","valueChange"],[3,"type"],[3,"value",4,"ngFor","ngForOf"],[2,"display","block","width","68%"],["appearance","outline",2,"width","100%"],["for","workbasket-description"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","7","cdkAutosizeMaxRows","7","maxlength","255","id","workbasket-description","placeholder","Description","name","workbasket.description",3,"ngModel","ngModelChange","input"],["description","ngModel"],[1,"general__spacer"],[1,"general__right-column"],["for","workbasket-domain"],["matInput","","type","text","disabled","","id","workbasket-domain","placeholder","Domain","name","classification.domain",3,"ngModel","ngModelChange"],["matInput","","type","text","maxlength","255","placeholder","OrgLevel 1","name","workbasket.orgLevel1",3,"ngModel","ngModelChange","input"],["orgLevel1","ngModel"],["matInput","","type","text","maxlength","255","placeholder","OrgLevel 2","name","workbasket.orgLevel2",3,"ngModel","ngModelChange","input"],["orgLevel2","ngModel"],["matInput","","type","text","maxlength","255","placeholder","OrgLevel 3","name","workbasket.orgLevel3",3,"ngModel","ngModelChange","input"],["orgLevel3","ngModel"],["matInput","","type","text","maxlength","255","placeholder","OrgLevel 4","name","workbasket.orgLevel4",3,"ngModel","ngModelChange","input"],["orgLevel4","ngModel"],[1,"custom-fields"],[4,"ngFor","ngForOf"],[1,"error"],["errorMessage","* Key is required",3,"displayError","validationTrigger"],["placeHolderMessage","Owner",3,"savedAccessId","entityId","displayError","isFormValid","accessIdEventEmitter"],["type","text","required","","maxlength","128","id","wb-owner","placeholder","Owner","name","workbasket.owner",1,"form-control",3,"ngModel","ngModelChange","input"],["owner","ngModel"],["errorMessage","* Owner is required",3,"displayError","validationTrigger"],[3,"value"],[3,"type","text"],["class","custom-fields__input",4,"ngIf"],[1,"custom-fields__input"],["appearance","outline",1,"custom-fields__form-field"],[3,"for"],["matInput","","type","text","maxlength","255",3,"placeholder","ngModel","id","name","ngModelChange","input"],["custom","ngModel"]],template:function(i,e){1&i&&t.YNc(0,nn,85,32,"div",0),2&i&&t.Q6J("ngIf",e.workbasket)},directives:[f.O5,_.F,It.d,I.KE,I.hX,pt.Nt,_.Fj,_.Q7,_.nD,_.JJ,_.On,Pe.y,ie.e,tt.gD,tt.$L,le.l,f.sg,kt.ey,Se.IC,I.TO],pipes:[Us.r,Ws.L,f.Ov],styles:[".workbasket-information-wrapper[_ngcontent-%COMP%]{height:calc(100vh - 213px);overflow-y:auto}.form[_ngcontent-%COMP%]{padding:15px;display:flex;flex-direction:column}.subheading[_ngcontent-%COMP%]{font-weight:700;padding-left:15px;margin-bottom:0}.horizontal-line[_ngcontent-%COMP%]{margin:5px 5px 25px;border-top-color:#555;border-top-width:1.35px}.general[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin-bottom:15px}.general__left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:nowrap;width:50%}.general__right-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50%}.general__spacer[_ngcontent-%COMP%]{display:block;width:20px}.general__description-and-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.general__description[_ngcontent-%COMP%]{width:100%}.custom-fields[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.custom-fields__input[_ngcontent-%COMP%]{flex:0 49%}.custom-fields__form-field[_ngcontent-%COMP%]{width:100%}"]}),pe([(0,d.Ph)(rt.x.workbasketsCustomisation),me("design:type",g.y)],G.prototype,"workbasketsCustomisation$",void 0),pe([(0,d.Ph)(w.L.buttonAction),me("design:type",g.y)],G.prototype,"buttonAction$",void 0),pe([(0,d.Ph)(w.L.selectedComponent),me("design:type",g.y)],G.prototype,"selectedComponent$",void 0);var on=c(9337),an=c(1006),Ot=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},St=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const rn=["htmlInputElement"];function cn(s,i){if(1&s&&(t.TgZ(0,"th",11)(1,"div")(2,"span"),t._uU(3),t.qZA()()()),2&s){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.field)}}function ln(s,i){if(1&s&&(t.ynx(0),t.YNc(1,cn,4,1,"th",14),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}const $e=function(s,i){return{"has-warning":s,"has-error":i}};function dn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"td",28)(1,"taskana-shared-type-ahead",29),t.NdJ("accessIdEventEmitter",function(o){t.CHM(e);const a=t.oxw().index;return t.oxw(2).accessItemSelected(o,a)}),t.qZA()()}if(2&s){const e=t.oxw(),n=e.index,o=e.$implicit,a=t.oxw(2);t.Q6J("ngClass",t.WLB(4,$e,a.accessItemsClone[n].accessId!==o.value.accessId,!o.value.accessId)),t.xp6(1),t.Q6J("savedAccessId",o)("displayError",!0)("isRequired",!0)}}function pn(s,i){if(1&s&&(t.TgZ(0,"td")(1,"div",20),t._UZ(2,"input",30,31),t.qZA()()),2&s){const e=t.oxw(),n=e.index,o=e.$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(3,$e,a.accessItemsClone[n].accessId!==o.value.accessId,!o.value.accessId&&a.formsValidatorService.formSubmitAttempt)),t.xp6(1),t.s9C("placeholder",o.invalid?"* Access id is required":""),t.Q6J("@validation",a.toggleValidationAccessIdMap.get(n))}}const K=function(s){return{"has-changes":s}};function mn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"td",20)(1,"input",33),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw(2).index;return t.oxw(2).setSelectAllCheckbox(a,o)}),t.qZA()()}if(2&s){const e=t.oxw().index,n=t.oxw(),o=n.index,a=n.$implicit,r=t.oxw(2);t.Q6J("ngClass",t.VKq(4,K,r.accessItemsClone[o][r.getAccessItemCustomProperty(e+1)]!==a.value[r.getAccessItemCustomProperty(e+1)])),t.xp6(1),t.hYB("id","checkbox-",o,"-",e+7,""),t.MGl("formControlName","permCustom",e+1,"")}}function _n(s,i){if(1&s&&(t.ynx(0),t.YNc(1,mn,2,6,"td",32),t.BQk()),2&s){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",e.visible)}}function un(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"tr",15)(1,"td")(2,"input",16),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).selectRow(o,r)}),t.qZA()(),t.YNc(3,dn,2,7,"td",17),t.ALo(4,"async"),t.YNc(5,pn,4,6,"ng-template",null,18,t.W1O),t.TgZ(7,"td")(8,"input",19),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).checkAll(r,o)}),t.qZA()(),t.TgZ(9,"td",20)(10,"input",21),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(11,"td",20)(12,"input",22),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(13,"td",20)(14,"input",23),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(15,"td",20)(16,"input",24),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(17,"td",20)(18,"input",25),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(19,"td",20)(20,"input",26),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.TgZ(21,"td",20)(22,"input",27),t.NdJ("change",function(o){const r=t.CHM(e).index;return t.oxw(2).setSelectAllCheckbox(r,o)}),t.qZA()(),t.YNc(23,_n,2,1,"ng-container",12),t.ALo(24,"async"),t.qZA()}if(2&s){const e=i.$implicit,n=i.index,o=t.MAs(6),a=t.oxw(2);let r;t.Q6J("formGroupName",n),t.xp6(3),t.Q6J("ngIf",null==(r=t.lcZ(4,19,a.accessItemsCustomization$))?null:r.accessId.lookupField)("ngIfElse",o),t.xp6(5),t.MGl("id","checkbox-",n,"-00"),t.xp6(1),t.Q6J("ngClass",t.VKq(23,K,a.accessItemsClone[n].permRead!==e.value.permRead)),t.xp6(1),t.MGl("id","checkbox-",n,"-0"),t.xp6(1),t.Q6J("ngClass",t.VKq(25,K,a.accessItemsClone[n].permReadTasks!==e.value.permReadTasks)),t.xp6(1),t.MGl("id","checkbox-",n,"-1"),t.xp6(1),t.Q6J("ngClass",t.VKq(27,K,a.accessItemsClone[n].permOpen!==e.value.permOpen)),t.xp6(1),t.MGl("id","checkbox-",n,"-2"),t.xp6(1),t.Q6J("ngClass",t.VKq(29,K,a.accessItemsClone[n].permEditTasks!==e.value.permEditTasks)),t.xp6(1),t.MGl("id","checkbox-",n,"-3"),t.xp6(1),t.Q6J("ngClass",t.VKq(31,K,a.accessItemsClone[n].permAppend!==e.value.permAppend)),t.xp6(1),t.MGl("id","checkbox-",n,"-4"),t.xp6(1),t.Q6J("ngClass",t.VKq(33,K,a.accessItemsClone[n].permTransfer!==e.value.permTransfer)),t.xp6(1),t.MGl("id","checkbox-",n,"-5"),t.xp6(1),t.Q6J("ngClass",t.VKq(35,K,a.accessItemsClone[n].permDistribute!==e.value.permDistribute)),t.xp6(1),t.MGl("id","checkbox-",n,"-6"),t.xp6(1),t.Q6J("ngForOf",t.lcZ(24,21,a.customFields$))}}const fn=function(s){return{width:s}};function gn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().addAccessItem()}),t._uU(4," Add new access "),t.TgZ(5,"mat-icon",5),t._uU(6,"add"),t.qZA()(),t.TgZ(7,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteAccessItems()}),t._uU(8," Delete selected access "),t.TgZ(9,"mat-icon",7),t._uU(10,"delete"),t.qZA()()(),t.TgZ(11,"form",8)(12,"table",9)(13,"thead")(14,"tr"),t._UZ(15,"th"),t.TgZ(16,"th",10),t._uU(17,"AccessID"),t.qZA(),t.TgZ(18,"th",11)(19,"div")(20,"span"),t._uU(21,"Select all"),t.qZA()()(),t.TgZ(22,"th",11)(23,"div")(24,"span"),t._uU(25,"Read"),t.qZA()()(),t.TgZ(26,"th",11)(27,"div")(28,"span"),t._uU(29,"Read tasks"),t.qZA()()(),t.TgZ(30,"th",11)(31,"div")(32,"span"),t._uU(33,"Open"),t.qZA()()(),t.TgZ(34,"th",11)(35,"div")(36,"span"),t._uU(37,"Edit tasks"),t.qZA()()(),t.TgZ(38,"th",11)(39,"div")(40,"span"),t._uU(41,"Append"),t.qZA()()(),t.TgZ(42,"th",11)(43,"div")(44,"span"),t._uU(45,"Transfer"),t.qZA()()(),t.TgZ(46,"th",11)(47,"div")(48,"span"),t._uU(49,"Distribute"),t.qZA()()(),t.YNc(50,ln,2,1,"ng-container",12),t.ALo(51,"async"),t.qZA()(),t.TgZ(52,"tbody"),t.YNc(53,un,25,37,"tr",13),t.qZA()()()()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(6,fn,e.expanded?"calc(100vw - 500px)":"calc(100vw - 250px)")),t.xp6(10),t.Q6J("formGroup",e.AccessItemsForm),t.xp6(39),t.Q6J("ngForOf",t.lcZ(51,4,e.customFields$)),t.xp6(3),t.Q6J("ngForOf",null==e.accessItemsGroups?null:e.accessItemsGroups.controls)}}class R{constructor(i,e,n,o,a,r){this.requestInProgressService=i,this.formBuilder=e,this.formsValidatorService=n,this.notificationsService=o,this.store=a,this.ngxsActions$=r,this.selectedRows=[],this.AccessItemsForm=this.formBuilder.group({accessItemsGroups:this.formBuilder.array([])}),this.toggleValidationAccessIdMap=new Map,this.added=!1,this.isNewAccessItemsFromStore=!1,this.isAccessItemsTabSelected=!1,this.destroy$=new y.x}get accessItemsGroups(){return this.AccessItemsForm.get("accessItemsGroups")}ngOnInit(){this.init(),this.selectedComponent$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{1===i&&(this.isAccessItemsTabSelected=!0)}),this.customFields$=this.accessItemsCustomization$.pipe(Nt(12),(0,on.b)(i=>{const e=this.createWorkbasketAccessItems();this.keysOfVisibleFields=["permRead","permOpen","permAppend","permTransfer","permDistribute","permReadTasks","permEditTasks"];for(let n=0;n<12;n++)i[n].visible&&this.keysOfVisibleFields.push(Object.keys(e)[n+12])})),this.accessItemsRepresentation$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{if(void 0!==i){let e=[...i.accessItems];e=this.sortAccessItems(e,"accessId"),this.accessItemsRepresentation={accessItems:e,_links:i._links},this.setAccessItemsGroups(e),this.accessItemsClone=this.cloneAccessItems(),this.accessItemsResetClone=this.cloneAccessItems(),this.isNewAccessItemsFromStore=!0}}),this.ngxsActions$.pipe((0,d.cx)(h.yu),(0,p.R)(this.destroy$)).subscribe(()=>{this.onSubmit()}),this.ngxsActions$.pipe((0,d.cx)(h.BS),(0,p.R)(this.destroy$)).subscribe(()=>{this.selectedWorkbasket$.pipe((0,Z.q)(1)).subscribe(i=>{this.accessItemsRepresentation._links={self:{href:i._links.accessItems.href}},this.setWorkbasketIdForCopy(i.workbasketId),this.formsValidatorService.validateFormAccess(this.accessItemsGroups,this.toggleValidationAccessIdMap).then(e=>{e&&this.onSave()})})}),this.buttonAction$.pipe((0,p.R)(this.destroy$)).pipe((0,ut.h)(i=>void 0!==i)).subscribe(i=>{i===M.W.UNDO&&this.clear()})}ngAfterViewInit(){this.inputs.changes.pipe((0,p.R)(this.destroy$)).subscribe(i=>{void 0!==i.last&&this.added&&i.last.nativeElement.focus()})}ngAfterViewChecked(){if((this.isNewAccessItemsFromStore||this.isAccessItemsTabSelected)&&document.getElementById("checkbox-0-00")){let i=0;this.accessItemsGroups.controls.forEach(()=>{this.setSelectAllCheckbox(i,{currentTarget:{checked:!0}}),i+=1}),this.isAccessItemsTabSelected=!1,this.isNewAccessItemsFromStore=!1}}ngOnChanges(i){this.workbasketClone&&this.workbasketClone.workbasketId!=this.workbasket.workbasketId&&this.init(),this.workbasketClone=this.workbasket}init(){var i;(null===(i=this.workbasket._links)||void 0===i?void 0:i.accessItems)&&(this.requestInProgressService.setRequestInProgress(!0),this.store.dispatch(new h.lz(this.workbasket._links.accessItems.href)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1)}))}sortAccessItems(i,e){return i.sort((n,o)=>n[e]<o[e]?-1:n[e]>o[e]?1:0)}setAccessItemsGroups(i){const e=i.map(o=>this.formBuilder.group(o));e.forEach(o=>{o.controls.accessId.setValidators(_.kI.required)});const n=this.formBuilder.array(e);this.AccessItemsForm.setControl("accessItemsGroups",n)}createWorkbasketAccessItems(){return{accessItemId:"",workbasketId:"",workbasketKey:"",accessId:"",accessName:"",permRead:!1,permOpen:!1,permAppend:!1,permTransfer:!1,permDistribute:!1,permReadTasks:!1,permEditTasks:!1,permCustom1:!1,permCustom2:!1,permCustom3:!1,permCustom4:!1,permCustom5:!1,permCustom6:!1,permCustom7:!1,permCustom8:!1,permCustom9:!1,permCustom10:!1,permCustom11:!1,permCustom12:!1,_links:{}}}addAccessItem(){const i=this.createWorkbasketAccessItems();i.workbasketId=this.workbasket.workbasketId,i.permRead=!0;const e=this.formBuilder.group(i);e.controls.accessId.setValidators(_.kI.required),this.accessItemsGroups.insert(0,e),this.accessItemsClone.unshift(i),this.added=!0}clear(){this.store.dispatch(new h.Lt(void 0)),this.formsValidatorService.formSubmitAttempt=!1,this.AccessItemsForm.reset(),this.setAccessItemsGroups(this.accessItemsResetClone),this.accessItemsClone=this.cloneAccessItems(),this.notificationsService.showSuccess("WORKBASKET_ACCESS_ITEM_RESTORE")}isFieldValid(i,e){return this.formsValidatorService.isFieldValid(this.accessItemsGroups[e],i)}onSubmit(){this.formsValidatorService.formSubmitAttempt=!0,this.formsValidatorService.validateFormAccess(this.accessItemsGroups,this.toggleValidationAccessIdMap).then(i=>{i&&this.onSave()})}onSave(){this.requestInProgressService.setRequestInProgress(!0),this.store.dispatch(new h.KB(this.accessItemsRepresentation._links.self.href,this.AccessItemsForm.value.accessItemsGroups)).subscribe(()=>{this.requestInProgressService.setRequestInProgress(!1)})}accessItemSelected(i,e){this.accessItemsGroups.controls[e].get("accessId").setValue(null==i?void 0:i.accessId),this.accessItemsGroups.controls[e].get("accessName").setValue(null==i?void 0:i.name)}checkAll(i,e){const n=e.target.checked,o=this.accessItemsGroups.controls[i];this.keysOfVisibleFields.forEach(a=>{o.get(a).setValue(n)})}setSelectAllCheckbox(i,e){let n=!1;if(e.currentTarget.checked){n=!0;const a=this.accessItemsGroups.controls[i].value;this.keysOfVisibleFields.forEach(r=>{!1===a[r]&&(n=!1)})}document.getElementById(`checkbox-${i}-00`).checked=n}cloneAccessItems(){return this.AccessItemsForm.value.accessItemsGroups.map(i=>Object.assign({},i))}setWorkbasketIdForCopy(i){this.accessItemsGroups.value.forEach(e=>{delete e.accessItemId,e.workbasketId=i})}getAccessItemCustomProperty(i){return`permCustom${i}`}selectRow(i,e){i.target.checked?this.selectedRows.push(e):this.selectedRows=this.selectedRows.filter(function(n){return n!=e})}deleteAccessItems(){this.selectedRows.sort(function(i,e){return e-i}),this.selectedRows.forEach(i=>{this.accessItemsGroups.removeAt(i),this.accessItemsClone.splice(i,1)}),this.selectedRows=[]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}R.\u0275fac=function(i){return new(i||R)(t.Y36(_t.K),t.Y36(_.qu),t.Y36(Rt.o),t.Y36(ct.g),t.Y36(d.yh),t.Y36(d.eX))},R.\u0275cmp=t.Xpm({type:R,selectors:[["taskana-administration-workbasket-access-items"]],viewQuery:function(i,e){if(1&i&&t.Gf(rn,5),2&i){let n;t.iGM(n=t.CRH())&&(e.inputs=n)}},inputs:{workbasket:"workbasket",expanded:"expanded"},features:[t.TTD],decls:1,vars:1,consts:[["id","wb-information",4,"ngIf"],["id","wb-information"],[1,"workbasket-access-items",3,"ngStyle"],[1,"workbasket-access-items__buttons"],["mat-stroked-button","","matTooltip","Add new access","type","button",1,"workbasket-access-items__buttons-add-access",3,"click"],["color","green-blue","aria-label","add new access"],["mat-stroked-button","","matTooltip","Delete selected access","type","button",1,"workbasket-access-items__buttons-delete-access",3,"click"],["color","green-blue","aria-label","delete access"],[1,"workbasket-access-items__form",3,"formGroup"],["formArrayName","accessItemsGroups","id","table-access-items",1,"workbasket-access-items__table"],["taskanaResizableWidth","",1,"required-header","test"],[1,"rotated-th"],[4,"ngFor","ngForOf"],[3,"formGroupName",4,"ngFor","ngForOf"],["class","rotated-th",4,"ngIf"],[3,"formGroupName"],["type","checkbox","aria-label","selectRow","aria-labelledby","selectRow",1,"workbasket-access-items__select-row",3,"change"],["class","workbasket-access-items__typeahead",3,"ngClass",4,"ngIf","ngIfElse"],["accessIdInput",""],["type","checkbox","aria-label","checkAll","aria-labelledby","checkAll",1,"workbasket-access-items__check-all",3,"id","change"],[3,"ngClass"],["type","checkbox","formControlName","permRead","aria-label","permRead","aria-labelledby","permRead",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permReadTasks","aria-label","permReadTasks","aria-labelledby","permReadTasks",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permOpen","aria-label","permOpen","aria-labelledby","permOpen",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permEditTasks","aria-label","permEditTasks","aria-labelledby","permEditTasks",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permAppend","aria-label","permAppend","aria-labelledby","permAppend",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permTransfer","aria-label","permTransfer","aria-labelledby","permTransfer",1,"workbasket-access-items__permission-checkbox",3,"id","change"],["type","checkbox","formControlName","permDistribute","aria-label","permDistribute","aria-labelledby","permDistribute",1,"workbasket-access-items__permission-checkbox",3,"id","change"],[1,"workbasket-access-items__typeahead",3,"ngClass"],["placeHolderMessage","Access id",3,"savedAccessId","displayError","isRequired","accessIdEventEmitter"],["matInput","","type","text","formControlName","accessId",3,"placeholder"],["htmlInputElement",""],[3,"ngClass",4,"ngIf"],["type","checkbox","aria-label","customField","aria-labelledby","customField",1,"workbasket-access-items__permission-checkbox",3,"id","formControlName","change"]],template:function(i,e){1&i&&t.YNc(0,gn,54,8,"div",0),2&i&&t.Q6J("ngIf",e.workbasket)},directives:[f.O5,f.PC,U.lW,P.gM,F.Hw,_._Y,_.JL,_.sg,_.CE,an.i,f.sg,_.x0,f.mk,ie.e,pt.Nt,_.Fj,_.JJ,_.u,_.Wl],pipes:[f.Ov],styles:['.workbasket-access-items[_ngcontent-%COMP%]{height:calc(100vh - 213px);overflow-y:auto;overflow-x:auto;display:inline-block}.workbasket-access-items__typeahead[_ngcontent-%COMP%]{text-align:left;min-width:124px;max-width:124px;line-height:20px;padding-bottom:0%!important;margin-top:5px}.workbasket-access-items__table[_ngcontent-%COMP%]{table-layout:auto;margin-top:1%;margin-left:1%;margin-right:auto;width:94%;text-align:center}.workbasket-access-items__table[_ngcontent-%COMP%]   .rotated-th[_ngcontent-%COMP%]{height:80px;min-width:40px;vertical-align:bottom;padding:0;line-height:.8}.workbasket-access-items__table[_ngcontent-%COMP%]   .rotated-th[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:40px;position:relative;left:40px;height:100%;transform:skew(-45deg);border-right:1px solid #dee2e6}.workbasket-access-items__table[_ngcontent-%COMP%]   .rotated-th[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;line-height:1;width:80px;left:50%;bottom:0;text-align:left;transform:skew(45deg) rotate(315deg);transform-origin:left center;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.workbasket-access-items__table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{min-width:40px;vertical-align:center;border:1px solid #dee2e6}.workbasket-access-items__table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child > td[_ngcontent-%COMP%]{border-top:2px solid #dddddd}.workbasket-access-items__table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] > input[type=checkbox][_ngcontent-%COMP%]{display:block}.workbasket-access-items__table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd) > td[_ngcontent-%COMP%]{background-color:#0000000d}.workbasket-access-items__table[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{filter:hue-rotate(320deg) brightness(1)}.workbasket-access-items__buttons-add-access[_ngcontent-%COMP%]{color:#fff;border:none;background:#22a39f;margin:10px 3px 0 6px;outline:none}.workbasket-access-items__buttons-delete-access[_ngcontent-%COMP%]{color:red;margin:2px 0 0 3px;outline:none}.workbasket-access-items__permission-checkbox[_ngcontent-%COMP%], .workbasket-access-items__check-all[_ngcontent-%COMP%], .workbasket-access-items__select-row[_ngcontent-%COMP%]{display:inline-block;height:1rem;line-height:0;margin:auto;order:0;position:relative;white-space:nowrap;width:1rem;flex-shrink:0;cursor:pointer}@supports (-moz-appearance: none){.workbasket-access-items__permission-checkbox[_ngcontent-%COMP%], .workbasket-access-items__check-all[_ngcontent-%COMP%], .workbasket-access-items__select-row[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}}.required-header[_ngcontent-%COMP%]{vertical-align:bottom;width:200px}.required-header[_ngcontent-%COMP%]:after{content:" *";color:red}  .workbasket-access-items__form .mat-form-field-wrapper{padding-bottom:0;height:58px}  .workbasket-access-items__typeahead .type-ahead__form-field .mat-form-field-infix{padding:0;position:initial;font-size:medium}  .mat-form-field-appearance-outline .mat-form-field-flex{margin-top:.7em}table[_ngcontent-%COMP%]{border-collapse:collapse}'],data:{animation:[Me.C]}}),Ot([(0,d.Ph)(w.L.selectedWorkbasket),St("design:type",g.y)],R.prototype,"selectedWorkbasket$",void 0),Ot([(0,d.Ph)(rt.x.accessItemsCustomisation),St("design:type",g.y)],R.prototype,"accessItemsCustomization$",void 0),Ot([(0,d.Ph)(w.L.workbasketAccessItems),St("design:type",g.y)],R.prototype,"accessItemsRepresentation$",void 0),Ot([(0,d.Ph)(w.L.buttonAction),St("design:type",g.y)],R.prototype,"buttonAction$",void 0),Ot([(0,d.Ph)(w.L.selectedComponent),St("design:type",g.y)],R.prototype,"selectedComponent$",void 0);var hn=c(1640),Ht=c(4322),Le=c(6385),bn=c(679);const Qe={leading:!0,trailing:!1};var vn=c(8947);var jt=c(5752),wn=c(4171),Vt=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},Gt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const Cn=["workbasket"],yn=["scroller"];function Tn(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1," Display filter "),t.TgZ(2,"mat-icon",14),t._uU(3,"filter_list"),t.qZA()())}function In(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1," Hide filter "),t.TgZ(2,"mat-icon",14),t._uU(3,"keyboard_arrow_up"),t.qZA()())}function An(s,i){1&s&&(t.TgZ(0,"mat-icon",15),t._uU(1,"check_box "),t.qZA())}function Zn(s,i){1&s&&(t.TgZ(0,"mat-icon",16),t._uU(1," check_box_outline_blank "),t.qZA())}function Mn(s,i){if(1&s&&t._UZ(0,"taskana-shared-workbasket-filter",17),2&s){const e=t.oxw();t.Q6J("component",e.component)}}function On(s,i){1&s&&(t.TgZ(0,"div",20),t._uU(1," There are currently no Workbaskets for distribution "),t.qZA())}function Sn(s,i){1&s&&(t.TgZ(0,"div",20),t._uU(1," There is currently no distributed Workbasket "),t.qZA())}function Pn(s,i){if(1&s&&(t.TgZ(0,"div",18),t.YNc(1,On,2,0,"div",19),t.YNc(2,Sn,2,0,"div",19),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0===e.side),t.xp6(1),t.Q6J("ngIf",1===e.side)}}function Dn(s,i){1&s&&(t.TgZ(0,"div",28)(1,"span",29),t._uU(2,"error"),t.qZA()())}function Fn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"mat-list-option",21),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().updateSelectAll(!a.selected)&&(a.selected=!a.selected)}),t.TgZ(1,"div",22)(2,"div",23),t._UZ(3,"taskana-administration-icon-type",24),t.qZA(),t.TgZ(4,"div",25)(5,"div",26)(6,"b"),t._uU(7),t.qZA(),t._uU(8,", "),t.TgZ(9,"i"),t._uU(10),t.qZA()(),t.TgZ(11,"p",26),t._uU(12),t.qZA(),t.TgZ(13,"p",26),t._uU(14),t.qZA()(),t.YNc(15,Dn,3,0,"div",27),t.qZA(),t._UZ(16,"mat-divider"),t.qZA()}if(2&s){const e=i.$implicit;t.Q6J("selected",e.selected)("value",e.workbasketId),t.xp6(3),t.Q6J("type",e.type),t.xp6(4),t.Oqu(e.name),t.xp6(3),t.Oqu(e.key),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.owner),t.xp6(1),t.Q6J("ngIf",e.markedForDeletion)}}const En=function(){return["name"]};class J{constructor(i,e){this.changeDetector=i,this.store=e,this.toolbarState=!1,this.destroy$=new y.x,this.allSelectedDiff=0}ngOnInit(){this.requestInProgress=2,this.side===Ht.M.AVAILABLE?(this.availableDistributionTargets$.pipe((0,p.R)(this.destroy$)).subscribe(i=>this.assignWbs(i)),this.availableDistributionTargetsFilter$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{void 0===this.filter||(0,Yt.isEqual)(this.filter,i)?this.filter=i:(this.filter=i,this.store.dispatch(new h.l5(!0,this.filter)),this.selectAll(!1),this.requestInProgress--)})):(this.workbasketDistributionTargets$.pipe().subscribe(i=>this.assignWbs(i)),this.selectedDistributionTargetsFilter$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{void 0===this.filter||(0,Yt.isEqual)(this.filter,i)?this.filter=i:(this.filter=i,this.applyFilter(),this.selectAll(!1),this.requestInProgress--)})),this.transferDistributionTargetObservable.subscribe(i=>{i!==this.side&&this.transferDistributionTargets(i)})}ngAfterContentChecked(){this.changeDetector.detectChanges()}ngOnChanges(i){var e;void 0!==(null===(e=i.allSelected)||void 0===e?void 0:e.currentValue)&&this.selectAll(i.allSelected.currentValue)}ngAfterViewInit(){this.workbasketList.elementScrolled().pipe((0,lt.U)(()=>this.workbasketList.measureScrollOffset("bottom")),(0,bn.G)(),(0,ut.h)(([i,e])=>e<i&&e<270),function xn(s,i=qe.z,e=Qe){const n=(0,vn.H)(s,i);return function kn(s,i=Qe){return(0,Re.e)((e,n)=>{const{leading:o,trailing:a}=i;let r=!1,l=null,m=null,x=!1;const u=()=>{null==m||m.unsubscribe(),m=null,a&&(Pt(),x&&n.complete())},st=()=>{m=null,x&&n.complete()},gt=N=>m=(0,Ne.Xf)(s(N)).subscribe((0,de.x)(n,u,st)),Pt=()=>{if(r){r=!1;const N=l;l=null,n.next(N),!x&&gt(N)}};e.subscribe((0,de.x)(n,N=>{r=!0,l=N,(!m||m.closed)&&(o?Pt():gt(N))},()=>{x=!0,(!(a&&r&&m)||m.closed)&&n.complete()}))})}(()=>n,e)}(200)).subscribe(()=>{this.store.dispatch(this.side===Ht.M.AVAILABLE?new h.l5(!1,this.filter):new h.yx(!1,this.filter))})}selectAll(i){void 0!==this.distributionTargetsList&&(this.allSelected=i,this.distributionTargets.map(e=>e.selected=i),this.allSelectedDiff=i?this.distributionTargets.length:0)}transferDistributionTargets(i){let e=this.distributionTargets.filter(n=>!0===n.selected);this.distributionTargets.forEach(n=>n.selected=!1),this.store.dispatch(new h.F3(i,e)).pipe((0,Z.q)(1)).subscribe(()=>{0===this.distributionTargets.length&&i===Ht.M.SELECTED&&this.store.dispatch(new h.l5(!1,this.filter))})}changeToolbarState(i){this.toolbarState=i}updateSelectAll(i){return i?this.allSelectedDiff++:this.allSelectedDiff--,this.allSelected=this.allSelectedDiff===this.distributionTargets.length,!0}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}assignWbs(i){this.distributionTargets=i.map(e=>Object.assign(Object.assign({},e),{selected:this.allSelected})),this.distributionTargetsClone=this.distributionTargets,this.requestInProgress--}applyFilter(){var i;function e(o,a,r){return!a||0===(null==a?void 0:a.length)||a.map(l=>l.toLowerCase()).includes(o[r].toLowerCase())}function n(o,a,r){if(a&&0!==(null==a?void 0:a.length)){let l=!0;return a.forEach(m=>{l=l&&o[r].toLowerCase().includes(m.toLowerCase())}),l}return!0}this.distributionTargets=null===(i=this.distributionTargetsClone)||void 0===i?void 0:i.filter(o=>{let a=!0;return a=a&&e(o,this.filter.name,"name"),a=a&&e(o,this.filter.key,"key"),a=a&&e(o,this.filter.owner,"owner"),a=a&&e(o,this.filter.domain,"domain"),a=a&&e(o,this.filter.type,"type"),a=a&&n(o,this.filter["owner-like"],"owner"),a=a&&n(o,this.filter["name-like"],"name"),a=a&&n(o,this.filter["key-like"],"key"),a=a&&n(o,this.filter["description-like"],"description"),a})}}J.\u0275fac=function(i){return new(i||J)(t.Y36(t.sBO),t.Y36(d.yh))},J.\u0275cmp=t.Xpm({type:J,selectors:[["taskana-administration-workbasket-distribution-targets-list"]],viewQuery:function(i,e){if(1&i&&(t.Gf(Cn,5),t.Gf(yn,5)),2&i){let n;t.iGM(n=t.CRH())&&(e.distributionTargetsList=n.first),t.iGM(n=t.CRH())&&(e.workbasketList=n.first)}},inputs:{side:"side",header:"header",component:"component",transferDistributionTargetObservable:"transferDistributionTargetObservable"},features:[t.TTD],decls:19,vars:18,consts:[[1,"distribution-targets-list"],[1,"distribution-targets-list__header",3,"matTooltip"],["mat-flat-button","",1,"distribution-targets-list__action-button",3,"click"],[4,"ngIf"],[2,"flex","1 1 auto"],["class","button-icon","matTooltip","Deselect all items",4,"ngIf"],["class","button-icon","matTooltip","Select all items",4,"ngIf"],["isExpanded","true",3,"component",4,"ngIf"],["class","distribution-targets-list__empty-list",4,"ngIf"],[3,"multiple"],["workbasket",""],["itemSize","90"],["scroller",""],["class","workbasket-distribution-targets__workbaskets-item",3,"selected","value","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[1,"button-icon"],["matTooltip","Deselect all items",1,"button-icon"],["matTooltip","Select all items",1,"button-icon"],["isExpanded","true",3,"component"],[1,"distribution-targets-list__empty-list"],["style","padding: 0 16px;",4,"ngIf"],[2,"padding","0 16px"],[1,"workbasket-distribution-targets__workbaskets-item",3,"selected","value","click"],[1,"distribution-targets-list__item-wrapper"],[1,"distribution-targets-list__item-icon"],["size","large","tooltip","true",3,"type"],[1,"distribution-targets-list__item-info"],[1,"distribution-targets-list__item--no-wrap"],["class","workbaskets-item__marked",4,"ngIf"],[1,"workbaskets-item__marked"],["matTooltip","Marked for deletion","title","Marked for deletion",1,"material-icons","md-20","red"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"mat-toolbar")(2,"span",1),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return e.changeToolbarState(!e.toolbarState)}),t.YNc(5,Tn,4,0,"span",3),t.YNc(6,In,4,0,"span",3),t.qZA(),t._UZ(7,"span",4),t.TgZ(8,"button",2),t.NdJ("click",function(){return e.selectAll(!e.allSelected)}),t.YNc(9,An,2,0,"mat-icon",5),t.YNc(10,Zn,2,0,"mat-icon",6),t.qZA()(),t.YNc(11,Mn,1,1,"taskana-shared-workbasket-filter",7),t.YNc(12,Pn,3,2,"div",8),t.TgZ(13,"mat-selection-list",9,10)(15,"cdk-virtual-scroll-viewport",11,12),t.YNc(17,Fn,17,8,"mat-list-option",13),t.ALo(18,"orderBy"),t.qZA()()()),2&i&&(t.xp6(2),t.s9C("matTooltip",e.header),t.xp6(1),t.Oqu(e.header),t.xp6(2),t.Q6J("ngIf",!e.toolbarState),t.xp6(1),t.Q6J("ngIf",e.toolbarState),t.xp6(3),t.Q6J("ngIf",e.allSelected),t.xp6(1),t.Q6J("ngIf",!e.allSelected),t.xp6(1),t.Q6J("ngIf",e.toolbarState),t.xp6(1),t.Q6J("ngIf",0==(null==e.distributionTargets?null:e.distributionTargets.length)&&e.requestInProgress<0),t.xp6(1),t.Q6J("multiple",!0),t.xp6(2),t.Tol(e.toolbarState?"distribution-targets-list__list--with-filter":"distribution-targets-list__list--no-filter"),t.xp6(2),t.Q6J("cdkVirtualForOf",t.xi3(18,14,e.distributionTargets,t.DdM(17,En)))("cdkVirtualForTemplateCacheSize",0))},directives:[Tt.Ye,P.gM,U.lW,f.O5,F.Hw,Ee.S,Mt.Ub,jt.N7,jt.xd,jt.x0,Mt.vS,le.l,It.d],pipes:[wn.d],styles:[".distribution-targets-list__header[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;max-width:50%}@media screen and (max-width: 1280px){.distribution-targets-list__header[_ngcontent-%COMP%]{max-width:100px}}.distribution-targets-list__action-button[_ngcontent-%COMP%]{margin-left:.5rem}.distribution-targets-list__list--no-filter[_ngcontent-%COMP%]{min-width:100%;background-color:#fff;border-radius:10px;overflow-y:scroll;height:calc(100vh - 360px)!important}@media screen and (max-width: 991px){.distribution-targets-list__list--no-filter[_ngcontent-%COMP%]{height:calc(100vh - 315px);min-height:83px}}.distribution-targets-list__list--with-filter[_ngcontent-%COMP%]{min-width:100%;background-color:#fff;border-radius:10px;overflow-y:scroll;height:calc(100vh - 547px)!important}@media screen and (max-width: 991px){.distribution-targets-list__list--with-filter[_ngcontent-%COMP%]{height:calc(100vh - 502px);min-height:83px}}.distribution-targets-list__item-wrapper[_ngcontent-%COMP%]{display:flex}.distribution-targets-list__item-icon[_ngcontent-%COMP%]{padding:32px 24px 24px 8px}.distribution-targets-list__item-info[_ngcontent-%COMP%]{display:block;padding:8px 0}.distribution-targets-list__empty-list[_ngcontent-%COMP%]{height:calc(100vh - 360px);border-radius:10px;background-color:#fff;font-size:24px;font-weight:700;color:#175263;display:flex;align-items:center;justify-content:center}.distribution-targets-list__item--no-wrap[_ngcontent-%COMP%]{word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}.mat-list-item[_ngcontent-%COMP%]{height:90px!important}.mat-list-single-selected-option[_ngcontent-%COMP%]{background-color:#246972!important;color:#fff}p[_ngcontent-%COMP%]{margin:0}"],data:{animation:[De.j$]}}),Vt([(0,d.Ph)(w.L.workbasketDistributionTargets),Gt("design:type",g.y)],J.prototype,"workbasketDistributionTargets$",void 0),Vt([(0,d.Ph)(w.L.availableDistributionTargets),Gt("design:type",g.y)],J.prototype,"availableDistributionTargets$",void 0),Vt([(0,d.Ph)(ce.q.getAvailableDistributionTargetsFilter),Gt("design:type",g.y)],J.prototype,"availableDistributionTargetsFilter$",void 0),Vt([(0,d.Ph)(ce.q.getSelectedDistributionTargetsFilter),Gt("design:type",g.y)],J.prototype,"selectedDistributionTargetsFilter$",void 0);var Ye=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},He=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};function qn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleSideBySideView()}),t._uU(1," Display side-by-side "),t.TgZ(2,"mat-icon",10),t._uU(3,"view_week"),t.qZA()()}}function Rn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleSideBySideView()}),t._uU(1," Display in single-view "),t.TgZ(2,"mat-icon",10),t._uU(3,"view_agenda"),t.qZA()()}}function Nn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.moveDistributionTargets(o.sideEnum.SELECTED)}),t._uU(3," Add selected distribution targets "),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()()(),t._UZ(6,"span",14),t.TgZ(7,"div",15)(8,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.moveDistributionTargets(o.sideEnum.AVAILABLE)}),t._uU(9," Remove selected distribution target "),t.TgZ(10,"mat-icon"),t._uU(11,"remove"),t.qZA()()()()}}function Un(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",17)(1,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.moveDistributionTargets(o.sideEnum.AVAILABLE)}),t._uU(2," Remove selected distribution target "),t.TgZ(3,"mat-icon"),t._uU(4,"remove"),t.qZA()(),t._UZ(5,"span",18),t.TgZ(6,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleDistributionTargetsPicker()}),t._uU(7," Display available distribution targets "),t.TgZ(8,"mat-icon"),t._uU(9,"launch"),t.qZA()()()}}function Wn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.moveDistributionTargets(o.sideEnum.SELECTED)}),t._uU(2," Add selected distribution targets "),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA()(),t._UZ(5,"span",18),t.TgZ(6,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleDistributionTargetsPicker()}),t._uU(7," Close selection "),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()}}function Jn(s,i){if(1&s&&t._UZ(0,"taskana-administration-workbasket-distribution-targets-list",22),2&s){const e=t.oxw();t.Q6J("ngClass",e.sideBySide?"distribution-targets-list__lists--left-side":"")("side",e.sideEnum.AVAILABLE)("component","availableDistributionTargets")("transferDistributionTargetObservable",e.transferDistributionTargetObservable)}}class z{constructor(i,e){this.notificationsService=i,this.store=e,this.sideEnum=Ht.M,this.sideBySide=!0,this.displayingDistributionTargetsPicker=!0,this.transferDistributionTargetObservable=new y.x,this.destroy$=new y.x}ngOnInit(){this.selectedWorkbasket$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{var e,n;void 0!==i&&i.workbasketId!==(null===(e=this.selectedWorkbasket)||void 0===e?void 0:e.workbasketId)&&((null===(n=this.selectedWorkbasket)||void 0===n?void 0:n.workbasketId)&&(this.store.dispatch(new h.yx(!0)),this.store.dispatch(new h.l5(!0))),this.selectedWorkbasket=i)}),this.buttonAction$.pipe((0,p.R)(this.destroy$)).pipe((0,ut.h)(i=>void 0!==i)).subscribe(i=>{i===M.W.UNDO&&this.onClear()})}toggleDistributionTargetsPicker(){this.displayingDistributionTargetsPicker=!this.displayingDistributionTargetsPicker}onSave(){this.store.dispatch(new h.WU)}moveDistributionTargets(i){this.transferDistributionTargetObservable.next(i)}onClear(){(0,hn.D)([this.store.dispatch(new h.yx(!0)),this.store.dispatch(new h.l5(!0)),this.store.dispatch(new Le.pY("selectedDistributionTargets")),this.store.dispatch(new Le.pY("availableDistributionTargets"))]).pipe((0,Z.q)(1)).subscribe(()=>this.notificationsService.showSuccess("WORKBASKET_DISTRIBUTION_TARGET_RESTORE"))}toggleSideBySideView(){this.sideBySide=!this.sideBySide,this.displayingDistributionTargetsPicker=!0}ngOnDestroy(){this.transferDistributionTargetObservable.complete(),this.destroy$.next(),this.destroy$.complete()}}z.\u0275fac=function(i){return new(i||z)(t.Y36(ct.g),t.Y36(d.yh))},z.\u0275cmp=t.Xpm({type:z,selectors:[["taskana-administration-workbasket-distribution-targets"]],decls:10,vars:11,consts:[["id","wb-information",1,"workbasket-distribution-targets"],[1,"distribution-targets-list__action-toolbar"],["mat-flat-button","","class","distribution-targets-list__action-button distribution-targets-list__toggle-view-button",3,"click",4,"ngIf"],["class","distribution-targets-list__action-buttons",4,"ngIf"],["class","distribution-targets-list__action-buttons distribution-targets-list__action-buttons--selected",4,"ngIf"],["class","distribution-targets-list__action-buttons distribution-targets-list__action-buttons--chooser",4,"ngIf"],[1,"distribution-targets-list__lists",3,"ngClass"],["header","Available distribution targets","id","dual-list-Left",3,"ngClass","side","component","transferDistributionTargetObservable",4,"ngIf"],["header","Selected distribution targets","id","dual-list-Right",3,"side","hidden","component","transferDistributionTargetObservable"],["mat-flat-button","",1,"distribution-targets-list__action-button","distribution-targets-list__toggle-view-button",3,"click"],[1,"distribution-targets-list__button-icon"],[1,"distribution-targets-list__action-buttons"],[1,"distribution-targets-list__action-buttons--chooser",2,"justify-content","flex-end","margin-right","2%"],["mat-flat-button","","color","accent",1,"distribution-targets-list__action-button","distribution-targets-list-dialog__add-button",3,"click"],[2,"flex-grow","1"],[1,"distribution-targets-list__action-buttons--selected",2,"justify-content","flex-end"],["mat-flat-button","","color","warn",1,"distribution-targets-list__action-button","distribution-targets-list-dialog__remove-button",3,"click"],[1,"distribution-targets-list__action-buttons","distribution-targets-list__action-buttons--selected"],[2,"flex","1 1 auto"],["mat-stroked-button","",1,"distribution-targets-list__action-button","distribution-targets-list-dialog__display-button",3,"click"],[1,"distribution-targets-list__action-buttons","distribution-targets-list__action-buttons--chooser"],["mat-flat-button","","color","warn",1,"distribution-targets-list-dialog__check-button",3,"click"],["header","Available distribution targets","id","dual-list-Left",3,"ngClass","side","component","transferDistributionTargetObservable"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"mat-toolbar",1),t.YNc(2,qn,4,0,"button",2),t.YNc(3,Rn,4,0,"button",2),t.YNc(4,Nn,12,0,"div",3),t.YNc(5,Un,10,0,"div",4),t.YNc(6,Wn,10,0,"div",5),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,Jn,1,4,"taskana-administration-workbasket-distribution-targets-list",7),t._UZ(9,"taskana-administration-workbasket-distribution-targets-list",8),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("ngIf",!e.sideBySide),t.xp6(1),t.Q6J("ngIf",e.sideBySide),t.xp6(1),t.Q6J("ngIf",e.sideBySide),t.xp6(1),t.Q6J("ngIf",!e.displayingDistributionTargetsPicker&&!e.sideBySide),t.xp6(1),t.Q6J("ngIf",e.displayingDistributionTargetsPicker&&!e.sideBySide),t.xp6(1),t.Q6J("ngClass",e.sideBySide?"distribution-targets-list__lists--side":"distribution-targets-list__lists--single"),t.xp6(1),t.Q6J("ngIf",e.displayingDistributionTargetsPicker),t.xp6(1),t.Q6J("side",e.sideEnum.SELECTED)("hidden",e.displayingDistributionTargetsPicker&&!e.sideBySide)("component","selectedDistributionTargets")("transferDistributionTargetObservable",e.transferDistributionTargetObservable))},directives:[Tt.Ye,f.O5,U.lW,F.Hw,f.mk,J],styles:[".distribution-targets-list__action-buttons[_ngcontent-%COMP%]{display:flex;flex-grow:1}.distribution-targets-list__action-button[_ngcontent-%COMP%]{margin-right:.5rem}.distribution-targets-list__button-icon[_ngcontent-%COMP%]{color:#555}.distribution-targets-list__lists[_ngcontent-%COMP%]{padding:0 16px 16px;background-color:#f5f5f5}.distribution-targets-list__lists--side[_ngcontent-%COMP%]{display:flex}.distribution-targets-list__lists--side[_ngcontent-%COMP%]   taskana-administration-workbasket-distribution-targets-list[_ngcontent-%COMP%]{width:50%}.distribution-targets-list__lists--left-side[_ngcontent-%COMP%]{margin-right:1%}"]}),Ye([(0,d.Ph)(w.L.buttonAction),He("design:type",g.y)],z.prototype,"buttonAction$",void 0),Ye([(0,d.Ph)(w.L.selectedWorkbasket),He("design:type",g.y)],z.prototype,"selectedWorkbasket$",void 0);var Bt=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},Kt=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};function $n(s,i){1&s&&t._UZ(0,"taskana-administration-workbasket-distribution-targets")}class ${constructor(i,e,n,o,a,r,l){this.location=i,this.route=e,this.router=n,this.domainService=o,this.requestInProgressService=a,this.store=r,this.ngxsActions$=l,this.destroy$=new y.x}ngOnInit(){this.getWorkbasketFromStore()}getWorkbasketFromStore(){this.selectedWorkbasketAndComponentAndAction$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{var e;const n=i.selectedWorkbasket,o=i.action;((null===(e=this.workbasket)||void 0===e?void 0:e.workbasketId)!==(null==n?void 0:n.workbasketId)||o!==this.action&&o===Fe.o.CREATE)&&(this.workbasket=(0,Yt.cloneDeep)(n)),this.action=o}),this.ngxsActions$.pipe((0,d.nW)(h.yu),(0,p.R)(this.destroy$)).subscribe(()=>{this.store.dispatch(new h.WU).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.selectedWorkbasket$.pipe((0,Z.q)(5),Ue(250),(0,Je.K)(()=>(0,We.of)(null)),(0,ut.h)(i=>null!==i)).subscribe(i=>this.workbasket=i)})}),this.ngxsActions$.pipe((0,d.nW)(h.BS),(0,p.R)(this.destroy$)).subscribe(()=>{this.store.dispatch(new h.WU).pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.selectedWorkbasket$.pipe((0,Z.q)(5),Ue(250),(0,Je.K)(()=>(0,We.of)(null)),(0,ut.h)(i=>null!==i)).subscribe(i=>this.workbasket=i)})})}selectComponent(i){this.store.dispatch(new h.Hr(i))}onSubmit(){this.store.dispatch(new h.Lt(M.W.SAVE))}onRestore(){this.store.dispatch(new h.Lt(M.W.UNDO))}onCopy(){this.store.dispatch(new h.Lt(M.W.COPY)),this.store.dispatch(new h.xd(this.workbasket))}onRemoveAsDistributionTarget(){this.store.dispatch(new h.Lt(M.W.REMOVE_AS_DISTRIBUTION_TARGETS))}onRemoveWorkbasket(){this.store.dispatch(new h.Lt(M.W.DELETE))}onClose(){this.store.dispatch(new h.Lt(M.W.CLOSE)),this.store.dispatch(new h.nK)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}$.\u0275fac=function(i){return new(i||$)(t.Y36(f.Ye),t.Y36(j.gz),t.Y36(j.F0),t.Y36(mt.N),t.Y36(_t.K),t.Y36(d.yh),t.Y36(d.eX))},$.\u0275cmp=t.Xpm({type:$,selectors:[["taskana-administration-workbasket-details"]],inputs:{expanded:"expanded"},decls:51,vars:16,consts:[[1,"workbasket-details"],[1,"workbasket-details__toolbar"],[1,"workbasket-details__title"],[1,"workbasket-details__title-name",3,"matTooltip"],[1,"workbasket-details__title-badge",3,"matTooltip"],[1,"workbasket-details__spacer"],["mat-button","","matTooltip","Save changes in current workbasket",1,"workbasket-details__button","workbasket-details__save-button",3,"click"],[1,"md-20"],["mat-stroked-button","","matTooltip","Revert changes to previous saved state",1,"workbasket-details__button",3,"click"],[1,"workbasket-details__button-aquamarine","md-20"],["id","action-toolbar__more-buttons","mat-stroked-button","","matTooltip","More actions",1,"action-toolbar__button",3,"matMenuTriggerFor"],["buttonMenu","matMenu"],["mat-menu-item","","matTooltip","Copy current values to create new workbasket",1,"workbasket-details__dropdown",3,"click"],[1,"workbasket-details__button-aquamarine"],["mat-menu-item","","matTooltip","Remove this workbasket as distribution target",1,"workbasket-details__dropdown",3,"click"],[1,"workbasket-details__button-red"],["mat-menu-item","","matTooltip","Delete this workbasket",1,"workbasket-details__dropdown",3,"click"],["mat-menu-item","","matTooltip","Close this workbasket and discard all changes",1,"workbasket-details__dropdown",2,"border-bottom-style","none",3,"click"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Information"],[3,"action","workbasket"],["label","Access"],[3,"expanded","workbasket"],["label","Distribution Targets"],[4,"matTabContent"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"h4",2)(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"span",4),t.ALo(6,"async"),t._uU(7),t.ALo(8,"async"),t.qZA()(),t._UZ(9,"span",5),t.TgZ(10,"button",6),t.NdJ("click",function(){return e.onSubmit()}),t._uU(11," Save "),t.TgZ(12,"mat-icon",7),t._uU(13,"save"),t.qZA()(),t.TgZ(14,"button",8),t.NdJ("click",function(){return e.onRestore()}),t._uU(15," Undo Changes "),t.TgZ(16,"mat-icon",9),t._uU(17,"restore"),t.qZA()(),t.TgZ(18,"button",10)(19,"mat-icon"),t._uU(20,"more_vert"),t.qZA()(),t.TgZ(21,"mat-menu",null,11)(23,"button",12),t.NdJ("click",function(){return e.onCopy()}),t.TgZ(24,"mat-icon",13),t._uU(25,"content_copy"),t.qZA(),t.TgZ(26,"span"),t._uU(27,"Copy"),t.qZA()(),t.TgZ(28,"button",14),t.NdJ("click",function(){return e.onRemoveAsDistributionTarget()}),t.TgZ(29,"mat-icon",15),t._uU(30,"remove_circle_outline"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"Remove as distribution target"),t.qZA()(),t.TgZ(33,"button",16),t.NdJ("click",function(){return e.onRemoveWorkbasket()}),t.TgZ(34,"mat-icon",15),t._uU(35,"delete"),t.qZA(),t.TgZ(36,"span"),t._uU(37,"Delete"),t.qZA()(),t.TgZ(38,"button",17),t.NdJ("click",function(){return e.onClose()}),t.TgZ(39,"mat-icon"),t._uU(40,"close"),t.qZA(),t.TgZ(41,"span"),t._uU(42,"Close"),t.qZA()()()(),t.TgZ(43,"mat-tab-group",18),t.NdJ("selectedIndexChange",function(o){return e.selectComponent(o)}),t.ALo(44,"async"),t.TgZ(45,"mat-tab",19),t._UZ(46,"taskana-administration-workbasket-information",20),t.qZA(),t.TgZ(47,"mat-tab",21),t._UZ(48,"taskana-administration-workbasket-access-items",22),t.qZA(),t.TgZ(49,"mat-tab",23),t.YNc(50,$n,1,0,"taskana-administration-workbasket-distribution-targets",24),t.qZA()()()),2&i){const n=t.MAs(22);t.xp6(3),t.s9C("matTooltip",e.workbasket.name),t.xp6(1),t.Oqu(e.workbasket.name),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,10,e.badgeMessage$)),t.xp6(2),t.hij(" ",t.lcZ(8,12,e.badgeMessage$),""),t.xp6(11),t.Q6J("matMenuTriggerFor",n),t.xp6(25),t.Q6J("selectedIndex",t.lcZ(44,14,e.selectedTab$)),t.xp6(3),t.Q6J("action",e.action)("workbasket",e.workbasket),t.xp6(2),t.Q6J("expanded",e.expanded)("workbasket",e.workbasket)}},directives:[Tt.Ye,P.gM,U.lW,F.Hw,A.p6,A.VK,A.OP,ft.SP,ft.uX,G,R,ft.Vc,z],pipes:[f.Ov],styles:[".workbasket-details__toolbar[_ngcontent-%COMP%]{background-color:#fff;padding:16px 36px 12px 24px}.workbasket-details__title[_ngcontent-%COMP%]{font-size:1.5rem;padding:4px;max-width:392px}.workbasket-details__title-name[_ngcontent-%COMP%]{display:block;overflow:hidden;text-overflow:ellipsis}.workbasket-details__title-badge[_ngcontent-%COMP%]{font-size:1.1rem;background-color:#c0c0c0a6;border-radius:4px;display:block;overflow:hidden;text-overflow:ellipsis}.workbasket-details__spacer[_ngcontent-%COMP%]{flex:1 1 auto}.workbasket-details__button[_ngcontent-%COMP%]{margin-right:6px}.workbasket-details__save-button[_ngcontent-%COMP%]{background-color:#22a39f;color:#fff}.workbasket-details__button-aquamarine[_ngcontent-%COMP%]{color:#22a39f}.workbasket-details__button-red[_ngcontent-%COMP%]{color:#d82626}"]}),Bt([(0,d.Ph)(w.L.selectedComponent),Kt("design:type",g.y)],$.prototype,"selectedTab$",void 0),Bt([(0,d.Ph)(w.L.badgeMessage),Kt("design:type",g.y)],$.prototype,"badgeMessage$",void 0),Bt([(0,d.Ph)(w.L.selectedWorkbasketAndComponentAndAction),Kt("design:type",g.y)],$.prototype,"selectedWorkbasketAndComponentAndAction$",void 0),Bt([(0,d.Ph)(w.L.selectedWorkbasket),Kt("design:type",g.y)],$.prototype,"selectedWorkbasket$",void 0);var je=function(s,i,e,n){var r,o=arguments.length,a=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(s,i,e,n);else for(var l=s.length-1;l>=0;l--)(r=s[l])&&(a=(o<3?r(a):o>3?r(i,e,a):r(i,e))||a);return o>3&&a&&Object.defineProperty(i,e,a),a},Ve=function(s,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(s,i)};const Ln=["workbasketList"],Qn=["toggleButton"];function Yn(s,i){1&s&&(t.TgZ(0,"mat-icon",10),t._uU(1,"chevron_left"),t.qZA())}function Hn(s,i){1&s&&(t.TgZ(0,"mat-icon",10),t._uU(1,"chevron_right"),t.qZA())}function jn(s,i){if(1&s&&(t.TgZ(0,"div",11),t._UZ(1,"taskana-administration-workbasket-details",3),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("expanded",e.expanded)}}function Vn(s,i){1&s&&(t.TgZ(0,"div",12)(1,"div",13)(2,"h3",14),t._uU(3,"Select a workbasket"),t.qZA(),t._UZ(4,"svg-icon",15),t.qZA()())}class L{constructor(i,e){this.route=i,this.store=e,this.showDetail=!1,this.destroy$=new y.x,this.expanded=!0}ngOnInit(){this.route.url&&this.route.url.pipe((0,p.R)(this.destroy$)).subscribe(i=>{"workbaskets"===i[0].path&&this.selectedWorkbasket$.pipe((0,Z.q)(1)).subscribe(e=>{void 0!==e.workbasketId&&this.store.dispatch(new h.b(e.workbasketId))})}),this.route.firstChild&&this.route.firstChild.params.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.routerParams=i,this.routerParams.id&&(this.showDetail=!0,this.store.dispatch("new-workbasket"===this.routerParams.id?new h.FX:new h.b(this.routerParams.id)))}),this.selectedWorkbasketAndAction$.pipe((0,p.R)(this.destroy$)).subscribe(i=>{this.showDetail=!!i.selectedWorkbasket||1===i.action})}toggleWidth(){250===this.workbasketList.nativeElement.offsetWidth?(this.expanded=!0,this.workbasketList.nativeElement.style.width="500px",this.workbasketList.nativeElement.style.minWidth="500px",this.toggleButton.nativeElement.style.left="480px"):(this.expanded=!1,this.workbasketList.nativeElement.style.width="250px",this.workbasketList.nativeElement.style.minWidth="250px",this.toggleButton.nativeElement.style.left="230px")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}L.\u0275fac=function(i){return new(i||L)(t.Y36(j.gz),t.Y36(d.yh))},L.\u0275cmp=t.Xpm({type:L,selectors:[["taskana-administration-workbasket-overview"]],viewQuery:function(i,e){if(1&i&&(t.Gf(Ln,5),t.Gf(Qn,5)),2&i){let n;t.iGM(n=t.CRH())&&(e.workbasketList=n.first),t.iGM(n=t.CRH())&&(e.toggleButton=n.first)}},decls:12,vars:5,consts:[[1,"workbasket-overview"],[1,"workbasket-overview__list"],["workbasketList",""],[3,"expanded"],[1,"vertical-right-divider"],[1,"workbasket-overview__toggle-view-button",3,"click"],["toggleButton",""],["class","md-36",4,"ngIf"],["class","workbasket-overview__details",4,"ngIf","ngIfElse"],["showEmptyPage",""],[1,"md-36"],[1,"workbasket-overview__details"],[1,"workbasket-overview__empty-page"],[1,"center-block","no-detail"],[1,"grey"],["src","./assets/icons/wb-empty.svg",1,"img-responsive","empty-icon"]],template:function(i,e){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1,2),t._UZ(3,"taskana-administration-workbasket-list",3),t.qZA(),t.TgZ(4,"div",4)(5,"span",5,6),t.NdJ("click",function(){return e.toggleWidth()}),t.YNc(7,Yn,2,0,"mat-icon",7),t.YNc(8,Hn,2,0,"mat-icon",7),t.qZA()(),t.YNc(9,jn,2,1,"div",8),t.YNc(10,Vn,5,0,"ng-template",null,9,t.W1O),t.qZA()),2&i){const n=t.MAs(11);t.xp6(3),t.Q6J("expanded",e.expanded),t.xp6(4),t.Q6J("ngIf",e.expanded),t.xp6(1),t.Q6J("ngIf",!e.expanded),t.xp6(1),t.Q6J("ngIf",e.showDetail)("ngIfElse",n)}},directives:[W,f.O5,F.Hw,$,Q.bk],styles:[".workbasket-overview[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;overflow:hidden;align-items:stretch;position:relative}.workbasket-overview__toggle-view-button[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:999px;border:1px solid #cecece;background-color:#fff;position:absolute;cursor:pointer;top:50%;left:480px;z-index:10;transition:.2s ease-out}.workbasket-overview__list[_ngcontent-%COMP%]{min-width:500px;width:500px;transition:.2s ease-out}.workbasket-overview__details[_ngcontent-%COMP%]{flex-grow:1}.workbasket-overview__empty-page[_ngcontent-%COMP%]{flex-grow:1;display:flex;justify-content:center;align-items:center}"]}),je([(0,d.Ph)(w.L.selectedWorkbasketAndAction),Ve("design:type",g.y)],L.prototype,"selectedWorkbasketAndAction$",void 0),je([(0,d.Ph)(w.L.selectedWorkbasket),Ve("design:type",g.y)],L.prototype,"selectedWorkbasket$",void 0);var Gn=c(2154);function Bn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"a",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().selectedTab="task-routing"}),t._uU(1,"Task Routing"),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("active","task-routing"==e.selectedTab)}}function Kn(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"mat-option",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().switchDomain(a)}),t._uU(1),t.qZA()}if(2&s){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e||"MASTER DOMAIN"," ")}}const zn=[{path:"",component:(()=>{class s{constructor(e,n,o){this.router=e,this.domainService=n,this.taskanaEngineService=o,this.selectedTab="",this.domains=[],this.destroy$=new y.x,this.routingAccess=!1,e.events.pipe((0,p.R)(this.destroy$)).subscribe(a=>{const r=this.router.url.split("/");this.selectedTab=this.router.url.includes("detail")?r[r.length-2]:r[r.length-1]})}ngOnInit(){this.taskanaEngineService.isCustomRoutingRulesEnabled().pipe((0,p.R)(this.destroy$)).subscribe(e=>{this.routingAccess=e}),this.domainService.getDomains().pipe((0,p.R)(this.destroy$)).subscribe(e=>{this.domains=e}),this.domainService.getSelectedDomain().pipe((0,p.R)(this.destroy$)).subscribe(e=>{this.selectedDomain=e})}switchDomain(e){this.domainService.switchDomain(e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(j.F0),t.Y36(mt.N),t.Y36(Gn.L))},s.\u0275cmp=t.Xpm({type:s,selectors:[["taskana-administration-overview"]],inputs:{selectedTab:"selectedTab"},decls:14,vars:6,consts:[[1,"administration-overview"],["backgroundColor","#f5f5f5","mat-tab-nav-bar","",1,"administration-overview__navbar"],["mat-tab-link","","routerLink","/taskana/administration/workbaskets",1,"administration-overview__navbar-links",3,"active","click"],["mat-tab-link","","routerLink","/taskana/administration/classifications",1,"administration-overview__navbar-links",3,"active","click"],["mat-tab-link","","routerLink","/taskana/administration/access-items-management",1,"administration-overview__navbar-links",3,"active","click"],["class","administration-overview__navbar-links","mat-tab-link","","routerLink","/taskana/administration/task-routing",3,"active","click",4,"ngIf"],[1,"administration-overview__domain"],["appearance","legacy"],["matTooltip","Select domain",3,"value"],[3,"value","click",4,"ngFor","ngForOf"],["mat-tab-link","","routerLink","/taskana/administration/task-routing",1,"administration-overview__navbar-links",3,"active","click"],[3,"value","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"nav",1)(2,"a",2),t.NdJ("click",function(){return n.selectedTab="workbaskets"}),t._uU(3,"Workbaskets"),t.qZA(),t.TgZ(4,"a",3),t.NdJ("click",function(){return n.selectedTab="classifications"}),t._uU(5,"Classifications"),t.qZA(),t.TgZ(6,"a",4),t.NdJ("click",function(){return n.selectedTab="access-items-management"}),t._uU(7,"Access Items Management"),t.qZA(),t.YNc(8,Bn,2,1,"a",5),t.qZA(),t.TgZ(9,"div",6)(10,"mat-form-field",7)(11,"mat-select",8),t.YNc(12,Kn,2,2,"mat-option",9),t.qZA()()(),t._UZ(13,"router-outlet"),t.qZA()),2&e&&(t.xp6(2),t.Q6J("active","workbaskets"==n.selectedTab),t.xp6(2),t.Q6J("active","classifications"==n.selectedTab),t.xp6(2),t.Q6J("active","access-items-management"==n.selectedTab),t.xp6(2),t.Q6J("ngIf",n.routingAccess),t.xp6(3),t.Q6J("value",n.selectedDomain),t.xp6(1),t.Q6J("ngForOf",n.domains))},directives:[ft.BU,j.yS,ft.Nj,f.O5,I.KE,tt.gD,P.gM,f.sg,kt.ey,j.lC],styles:[".administration-overview__navbar[_ngcontent-%COMP%]{position:relative}.administration-overview__navbar[_ngcontent-%COMP%]{background-color:#f5f5f5}.administration-overview__domain[_ngcontent-%COMP%]{max-height:48px;position:absolute;top:46px;right:24px;z-index:11}.mat-tab-link[_ngcontent-%COMP%]{color:#1a202c!important}.mat-tab-label-active[_ngcontent-%COMP%]{font-weight:bolder!important;color:unset;opacity:1}"]}),s})(),canActivate:[xt.Z],children:[{path:"workbaskets",component:L,canActivate:[xt.Z],children:[{path:"",component:L,outlet:"master"},{path:":id",component:L,outlet:"detail"},{path:"**",redirectTo:""}]},{path:"classifications",component:V,canActivate:[xt.Z],children:[{path:"",component:V,outlet:"master"},{path:":id",component:V,outlet:"detail"},{path:"**",redirectTo:""}]},{path:"access-items-management",component:H,canActivate:[xt.Z],children:[{path:"**",redirectTo:""}]},{path:"task-routing",canActivate:[xt.Z],loadChildren:()=>c.e("src_app_v2_task-routing_task-routing_module_ts").then(c.bind(c,6205)).then(s=>s.TaskRoutingModule)}]},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];let Xn=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[j.Bz.forChild(zn)],j.Bz]}),s})();var to=c(833);const eo=[f.ez,_.u5,_.UX,Q._J,X.nM,nt.m,Xn,Ft.H3,li,jt.Cl];let io=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[Ae,Ze,pi.JQ,wt],imports:[[eo,Wi.Fk,I.lN,tt.LD,A.Tx,F.Ps,U.ot,ft.Nh,pt.c,P.AV,It.t,Mt.ie,to.Cv,Tt.g0,ye.p9,kt.si,D.p0,we.Is,Wt.To]]}),s})()},5226:function(zt,Dt){var _;void 0!==(_=function(){"use strict";function X(b,k,O){var v=new XMLHttpRequest;v.open("GET",b),v.responseType="blob",v.onload=function(){ot(v.response,k,O)},v.onerror=function(){console.error("could not download file")},v.send()}function Ft(b){var k=new XMLHttpRequest;k.open("HEAD",b,!1);try{k.send()}catch(O){}return 200<=k.status&&299>=k.status}function nt(b){try{b.dispatchEvent(new MouseEvent("click"))}catch(O){var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),b.dispatchEvent(k)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,Xt=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),ot=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!Xt?function(b,k,O){var v=t.URL||t.webkitURL,T=document.createElement("a");T.download=k=k||b.name||"download",T.rel="noopener","string"==typeof b?(T.href=b,T.origin===location.origin?nt(T):Ft(T.href)?X(b,k,O):nt(T,T.target="_blank")):(T.href=v.createObjectURL(b),setTimeout(function(){v.revokeObjectURL(T.href)},4e4),setTimeout(function(){nt(T)},0))}:"msSaveOrOpenBlob"in navigator?function(b,k,O){if(k=k||b.name||"download","string"!=typeof b)navigator.msSaveOrOpenBlob(function Q(b,k){return void 0===k?k={autoBom:!1}:"object"!=typeof k&&(console.warn("Deprecated: Expected third argument to be a object"),k={autoBom:!k}),k.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?new Blob(["\ufeff",b],{type:b.type}):b}(b,O),k);else if(Ft(b))X(b,k,O);else{var v=document.createElement("a");v.href=b,v.target="_blank",setTimeout(function(){nt(v)})}}:function(b,k,O,v){if((v=v||open("","_blank"))&&(v.document.title=v.document.body.innerText="downloading..."),"string"==typeof b)return X(b,k,O);var T="application/octet-stream"===b.type,te=/constructor/i.test(t.HTMLElement)||t.safari,Et=/CriOS\/[\d]+/.test(navigator.userAgent);if((Et||T&&te||Xt)&&"undefined"!=typeof FileReader){var ht=new FileReader;ht.onloadend=function(){var Y=ht.result;Y=Et?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=Y:location=Y,v=null},ht.readAsDataURL(b)}else{var qt=t.URL||t.webkitURL,bt=qt.createObjectURL(b);v?v.location=bt:location.href=bt,v=null,setTimeout(function(){qt.revokeObjectURL(bt)},4e4)}});t.saveAs=ot.saveAs=ot,zt.exports=ot}.apply(Dt,[]))&&(zt.exports=_)}}]);
//# sourceMappingURL=src_app_administration_administration_module_ts.7a62ba6a62b15cac.js.map